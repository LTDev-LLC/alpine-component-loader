function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){r(e);return}s.done?t(c):Promise.resolve(c).then(n,o)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(o,i){var a=e.apply(r,n);function s(e){t(a,o,i,s,c,"next",e)}function c(e){t(a,o,i,s,c,"throw",e)}s(void 0)})}}function n(e,t,r){return t=l(t),function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e,_()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r))}function o(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function i(e,t,r){return(i=_()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&d(o,r.prototype),o}).apply(null,arguments)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function h(e,t){return null!=t&&"u">typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,s=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(s)throw n}}return i}}(e,t)||v(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||v(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){return e&&"u">typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function v(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}}function g(e){var t="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return i(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)})(e)}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_=function(){return!!e})()}function w(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype),s=Object.defineProperty;return s(a,"next",{value:c(0)}),s(a,"throw",{value:c(1)}),s(a,"return",{value:c(2)}),"function"==typeof Symbol&&s(a,Symbol.iterator,{value:function(){return this}}),a;function c(s){return function(c){var l=[s,c];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}/**
 * @license AlpineComponentLoader
 *
 * Copyright (c) LTDev LLC
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C=new Map,A=new Map,E={String:String,Number:Number,Boolean:Boolean,Array:Array,Object:Object},S=/*#__PURE__*/function(){function e(){o(this,e)}return s(e,null,[{key:"start",value:function(){return r(function(){return w(this,function(t){switch(t.label){case 0:if(e._started)return[2];return e._started=!0,[4,e.pruneCaches()];case 1:return t.sent(),e.registerComponent(),e.registerDynamicLoader(),e.registerTemplates(),[2]}})})()}},{key:"pruneCaches",value:function(){return r(function(){var t,r,n,o=arguments;return w(this,function(i){switch(i.label){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:e.globalConfig._templateCachePrefix,r=o.length>1&&void 0!==o[1]?o[1]:e.globalConfig._templateCacheKey,!("caches"in window))return[2];return n=Promise.all,[4,caches.keys()];case 1:return[4,n.apply(Promise,[i.sent().filter(function(e){return e.startsWith(t)}).filter(function(e){return e!==r}).map(function(e){return caches.delete(e)})])];case 2:return[2,i.sent()]}})}).apply(this,arguments)}},{key:"clearCache",value:function(){return r(function(){var t,r,n=arguments;return w(this,function(o){switch(o.label){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:e.globalConfig._templateCacheKey,!("caches"in window))return console.warn("[ACL] Cache API not supported."),[2];return r=Promise.all,[4,caches.keys()];case 1:return[4,r.apply(Promise,[o.sent().filter(function(e){return e.startsWith(t)}).map(function(e){return caches.delete(e)})])];case 2:return[2,o.sent()]}})}).apply(this,arguments)}},{key:"config",value:function(t){Object.assign(e.globalConfig,t)}},{key:"registerComponent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.globalConfig.defaultComponentName;customElements.get(t)||customElements.define(t,k)}},{key:"registerDynamicLoader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.globalConfig.defaultDynamicName;customElements.get(t)||customElements.define(t,O)}},{key:"registerTemplates",value:function(){document.querySelectorAll("template[acl-component]").forEach(function(t){var r,n=t.getAttribute("acl-component");if(n){try{r={attributes:Object.fromEntries(Object.entries(JSON.parse(t.getAttribute("acl-props")||"{}")).map(function(e){var t=b(e,2),r=t[0],n=t[1];return[r,(void 0===n?"undefined":m(n))==="object"&&n.type?p(f({},n),{type:E[n.type]||String}):E[n]||String]}))}}catch(e){console.warn("[ACL] Invalid JSON in acl-props for <".concat(n,">"),e)}e.define(n,t,r||{})}})}},{key:"toggleDebug",value:function(){console.warn('[ACL] Debugger not loaded. Import "acl-debugger.js" to enable.')}},{key:"prefetch",value:function(t){return r(function(){var r;return w(this,function(n){switch(n.label){case 0:if(!(r=e._registry.get(t)))return console.warn("[ACL] Cannot prefetch <".concat(t,">: component not defined.")),[2];return[4,e.loadTemplate(r.source,r.settings)];case 1:return[2,n.sent()]}})})()}},{key:"loadTemplate",value:function(e,t){return r(function(){var r,n,o,i,a,s,c,l,u;return w(this,function(f){switch(f.label){case 0:if(h(e,HTMLTemplateElement))return[2,e.content];if("string"==typeof e&&e.startsWith("#")){if(!(r=document.querySelector(e)))return[2,Promise.reject(Error('Template ID "'.concat(e,'" not found')))];if(!h(r,HTMLTemplateElement))return[2,Promise.reject(Error('ID "'.concat(e,'" is not a <template>')))];return[2,r.content]}if(n=t.cacheTemplates&&"caches"in window,o="acl__fetched-at__",!n)return[3,7];f.label=1;case 1:return f.trys.push([1,6,,7]),[4,caches.open(t._templateCacheKey)];case 2:return[4,(i=f.sent()).match(e)];case 3:if(!(null==(a=f.sent())?void 0:a.ok))return[3,5];if(!Number.isNaN(s=Number(a.headers.get(o)))&&Date.now()-s<t._templateCacheExpire)return[2,a.text()];return[4,i.delete(t._templateCacheKey)];case 4:f.sent(),f.label=5;case 5:return[3,7];case 6:return f.sent(),[3,7];case 7:return[4,fetch(e,{cache:"no-store"})];case 8:if(!(c=f.sent()).ok)throw Error("HTTP ".concat(c.status));if(!n)return[3,12];f.label=9;case 9:return f.trys.push([9,11,,12]),(u=new Headers((l=c.clone()).headers)).set(o,Date.now().toString()),[4,i.put(e,new Response(l.body,{status:l.status,statusText:l.statusText,headers:u}))];case 10:case 11:return f.sent(),[3,12];case 12:return[2,c.text()]}})})()}},{key:"define",value:function(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=p(f({attributes:{},loading:"eager",hooks:{beforeFetch:function(e){return e},afterFetch:function(e){return e}}},e.globalConfig,a),{externalCss:y(e.globalConfig.externalCss||[]).concat(y(a.externalCss||[])),externalScripts:y(e.globalConfig.externalScripts||[]).concat(y(a.externalScripts||[])),sharedStyleSheets:y(e.globalConfig.sharedStyleSheets||[]).concat(y(a.sharedStyleSheets||[])),errorCss:f({},{display:"flex",flexDirection:"column",gap:"0.5rem",padding:"1rem",border:"1px solid #fca5a5",backgroundColor:"#fee2e2",color:"#991b1b",borderRadius:"6px",fontFamily:"sans-serif",fontSize:"0.9rem"},e.globalConfig.errorCss||{},a.errorCss||{}),forwardEvents:y(e.globalConfig.forwardEvents||[]).concat(y(a.forwardEvents||[])),fallback:a.fallback||null,persist:a.persist||!1,persistKey:a.persistKey||null,persistDebounce:a.persistDebounce||250,bindStore:a.bindStore||null,dataSrc:a.dataSrc||null,fetchTimeout:a.fetchTimeout||3e4,fetchOptions:a.fetchOptions||{}}),h=y(new Set(y(Object.keys(l.attributes)).concat(["bind-store","data-src"]))),d=i;"string"==typeof i&&!i.startsWith("#")&&l.basePath&&(d=l.basePath+i),e._registry.set(t,{source:d,settings:l});var v=/*#__PURE__*/function(i){function a(){o(this,a);var e=n(this,a),t=f({$data:null,$loading:!1,$error:null,$lastUpdated:Date.now()},{$emit:function(t,r){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0,detail:r}))},$reload:function(){return e.reload()}},l.attributes||{});return e._initialized=!1,e._loading=!1,e._disconnectTimeout=null,e._fetchAbortController=null,e.$props=window.Alpine?window.Alpine.reactive(t):t,e._root=l.shadow?e.attachShadow({mode:"open"}):e,e._observer=null,e._scopeId="scope-".concat(Math.random().toString(36).slice(2,9)),e._slotObserver=null,e._originalLightDom=document.createDocumentFragment(),e}return u(a,i),s(a,[{key:"attributeChangedCallback",value:function(e,t,r){t!==r&&("data-src"===e?this._initialized&&this._fetchData(r):this._updateProp(e,r),this._initialized&&this._triggerHook("updated",{name:e,oldVal:t,newVal:r}))}},{key:"connectedCallback",value:function(){if(this.setAttribute("data-acl-component",this.tagName),this._disconnectTimeout){clearTimeout(this._disconnectTimeout),this._disconnectTimeout=null;return}if(this._initialized)return void this._triggerHook("activated");if(!this._loading){this._loading=!0,this._syncAllAttributes();var e=this.getAttribute("loading")||l.loading;"lazy"===e?this._initLazyObserver():"idle"===e?this._initIdleLoader():this._load()}}},{key:"disconnectedCallback",value:function(){var e=this;(this._slotObserver&&(this._slotObserver.disconnect(),this._slotObserver=null),this._isKeptAlive||this.hasAttribute("keep-alive"))?this._triggerHook("deactivated"):this._disconnectTimeout=setTimeout(function(){if(e.isConnected){e._disconnectTimeout=null;return}e._triggerHook("unmounted"),e._fetchAbortController&&e._fetchAbortController.abort(),e._observer&&e._observer.disconnect(),e._root&&window.Alpine&&e._initialized&&window.Alpine.destroyTree(e._root),e._initialized=!1,e._loading=!1,e._disconnectTimeout=null},250)}},{key:"_initLazyObserver",value:function(){var e=this,t=document.createElement("div");t.style.minHeight="1px",this._root.appendChild(t),this._observer=new IntersectionObserver(function(t){t[0].isIntersecting&&(e._load(),e._observer.disconnect(),e._observer=null)},{rootMargin:"100px"}),this._observer.observe(this)}},{key:"_initIdleLoader",value:function(){var e=this;"requestIdleCallback"in window?requestIdleCallback(function(){return e._load()},{timeout:2e3}):setTimeout(function(){return e._load()},200)}},{key:"_initSlotObserver",value:function(){var e=this;this._slotObserver||(this._slotObserver=new MutationObserver(function(t){return t.forEach(function(t){t.addedNodes.forEach(function(t){if((t.nodeType===Node.ELEMENT_NODE||t.nodeType===Node.TEXT_NODE)&&!(t.nodeType===Node.ELEMENT_NODE&&t.hasAttribute("data-acl-slot"))){var r=(t.nodeType===Node.ELEMENT_NODE?t.getAttribute("slot"):null)||"default",n=e._root.querySelector('div[data-acl-slot="'.concat(r,'"]'));n&&n.appendChild(t)}})})}),this._slotObserver.observe(this,{childList:!0}))}},{key:"reload",value:function(){return r(function(){return w(this,function(e){switch(e.label){case 0:if(this._loading)return[2];if(console.log("[ACL] Reloading <".concat(t,">...")),!l.cacheTemplates)return[3,3];return[4,caches.open(l._templateCacheKey)];case 1:return[4,e.sent().delete(d)];case 2:e.sent(),e.label=3;case 3:return this._initialized=!1,this.$props.$loading=!0,this.$props.$error=null,this.$props.$data=null,[4,this._load()];case 4:return e.sent(),[2]}})}).call(this)}},{key:"_load",value:function(){return r(function(){var e,r,n,o,i,a,s,c,u;return w(this,function(h){switch(h.label){case 0:e=this,r=performance.now(),h.label=1;case 1:if(h.trys.push([1,5,,14]),this._initialized)return[2];return this._triggerHook("beforeMount"),[4,Promise.all([l.externalCss.length||l.externalScripts.length?this._loadExternalDependencies():Promise.resolve(),this._resolveContent(d),l.dataSrc||this.getAttribute("data-src")?this._fetchData(this.getAttribute("data-src")||l.dataSrc):Promise.resolve()])];case 2:return n=h.sent()[1],o=null,l.shadow||(o=this._captureLightSlots()),this._root.replaceChildren(),l.shadow&&l.externalCss.length&&l.externalCss.forEach(function(t){var r=document.createElement("link");r.rel="stylesheet",r.href=t,e._root.appendChild(r)}),[4,this._renderSafe(n,o)];case 3:return h.sent(),l.shadow&&l.forwardEvents.length>0&&this._setupEventForwarding(),l.shadow||this._initSlotObserver(),[4,this._initAlpine()];case 4:return h.sent(),this._perf={duration:performance.now()-r},this._initialized=!0,this._loading=!1,this._dispatch("mount"),this._triggerHook("mounted"),this._dispatch("loaded"),[3,14];case 5:if(i=h.sent(),console.error("[ACL] <".concat(t,">"),i),this._loading=!1,!(a=this.getAttribute("fallback")||l.fallback))return[3,12];h.label=6;case 6:return h.trys.push([6,10,,11]),this._root.replaceChildren(),c=(s=this)._renderSafe,[4,this._resolveContent(a)];case 7:return[4,c.apply(s,[h.sent(),null])];case 8:return h.sent(),[4,this._initAlpine()];case 9:return h.sent(),this._perf={duration:performance.now()-r},this._initialized=!0,this._dispatch("loaded"),[2];case 10:return u=h.sent(),console.error("[ACL] <".concat(t,"> Fallback Failed:"),u),this._renderError("Load Failed: ".concat(i.message,". (Fallback also failed)")),[3,11];case 11:return[3,13];case 12:this._renderError(i.message),h.label=13;case 13:return[3,14];case 14:return[2]}})}).call(this)}},{key:"_fetchData",value:function(t){return r(function(){var r,n,o,i,a,s,c,u,h,d,b,y,v,g,_;return w(this,function(w){switch(w.label){case 0:if(r=this,!t)return[2];this._fetchAbortController&&this._fetchAbortController.abort(),this._fetchAbortController=new AbortController,n=this._fetchAbortController.signal,this.$props.$loading=!0,this.$props.$error=null,o=setTimeout(function(){return r._fetchAbortController.abort("Timeout")},l.fetchTimeout),w.label=1;case 1:if(w.trys.push([1,11,12,13]),c=p(f({method:"GET",headers:{Accept:"application/json"}},(null==(i=e.globalConfig)?void 0:i.fetchOptions)||{},(null==l?void 0:l.fetchOptions)||{}),{signal:n}),"function"!=typeof(null==l||null==(a=l.hooks)?void 0:a.beforeFetch))return[3,3];return[4,l.hooks.beforeFetch(c)];case 2:(u=w.sent())&&(void 0===u?"undefined":m(u))==="object"&&(c=u),w.label=3;case 3:return[4,fetch(t,c)];case 4:if(h=w.sent(),clearTimeout(o),!h.ok)throw Error("API Error: ".concat(h.status," ").concat(h.statusText));if(!(d=h.headers.get("content-type"))||!d.includes("application/json"))throw Error('Invalid response. Expected JSON, got "'.concat(d,'"'));w.label=5;case 5:return w.trys.push([5,7,,8]),[4,h.json()];case 6:return b=w.sent(),[3,8];case 7:throw y=w.sent(),Error("Invalid JSON: ".concat(y.message));case 8:if("function"!=typeof(null==l||null==(s=l.hooks)?void 0:s.afterFetch))return[3,10];return[4,l.hooks.afterFetch(b)];case 9:(v=w.sent())&&(void 0===v?"undefined":m(v))==="object"&&(b=v),w.label=10;case 10:return n.aborted||(this.$props.$data=b),[3,13];case 11:if("AbortError"===(g=w.sent()).name||n.aborted)return"Timeout"===n.reason&&(this.$props.$error="Request timed out after ".concat(l.fetchTimeout,"ms"),this.$props.$data=null),[2];return console.error("[ACL] Fetch failed for ".concat(t),g),this.$props.$error=g.message,this.$props.$data=null,[3,13];case 12:return clearTimeout(o),n.aborted&&"Timeout"!==n.reason||(this.$props.$loading=!1,(null==(_=this._fetchAbortController)?void 0:_.signal)===n&&(this._fetchAbortController=null)),[7];case 13:return[2]}})}).call(this)}},{key:"_triggerHook",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.hooks&&"function"==typeof l.hooks[e]&&l.hooks[e].call(this,f({el:this,root:this._root,props:this.$props},t))}},{key:"_loadExternalDependencies",value:function(){return r(function(){var e;return w(this,function(t){switch(t.label){case 0:return e=[],l.externalCss.forEach(function(e){if(!document.querySelector('link[href="'.concat(e,'"]'))){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}}),l.externalScripts.forEach(function(t){if(!A.has(t)){var r=new Promise(function(e,r){if(document.querySelector('script[src="'.concat(t,'"]')))return void e();var n=document.createElement("script");n.src=t,n.async=!0,n.onload=function(){return e()},n.onerror=function(){return r(Error("Failed to load script: ".concat(t)))},document.head.appendChild(n)});A.set(t,r)}e.push(A.get(t))}),[4,Promise.all(e)];case 1:return t.sent(),[2]}})})()}},{key:"_captureLightSlots",value:function(){var e=this;for(this._initialized&&this._root.querySelectorAll("[data-acl-slot]").forEach(function(t){for(;t.firstChild;)e._originalLightDom.appendChild(t.firstChild)});this.firstChild;)this._originalLightDom.appendChild(this.firstChild);return Array.from(this._originalLightDom.childNodes).reduce(function(e,t){var r=t.nodeType===Node.ELEMENT_NODE&&t.hasAttribute("slot")?t.getAttribute("slot"):"default";return p(f({},e),c({},r,(e[r]||[]).concat(t)))},{default:[]})}},{key:"_renderSafe",value:function(e,n){return r(function(){var r,o,i,a,s,c,u,h;return w(this,function(f){for(r=this,"string"==typeof e?(i=new DOMParser().parseFromString(e,"text/html"),o=document.createDocumentFragment(),y(Array.from(i.head.childNodes)).concat(y(Array.from(i.body.childNodes))).forEach(function(e){return o.appendChild(e)})):o=e.cloneNode(!0),l.stripStyles?o.querySelectorAll("style").forEach(function(e){return e.remove()}):(a=Array.from(o.querySelectorAll("style")),l.shadow&&l.useConstructibleStyles&&document.adoptedStyleSheets?(s=a.map(function(e){return e.textContent}).join("\n"),c=null,s.trim().length>0&&(C.has(s)?c=C.get(s):((c=new CSSStyleSheet).replaceSync(s),C.set(s,c))),this._root.adoptedStyleSheets=y(l.sharedStyleSheets||[]).concat(y(c?[c]:[])),a.forEach(function(e){return e.remove()})):a.forEach(function(e){if(!l.shadow)if("CSSScopeRule"in window)e.textContent="@scope { ".concat(e.textContent.replace(/:host/g,":scope")," }");else{r.setAttribute("data-scope",r._scopeId);var n="".concat(t,'[data-scope="').concat(r._scopeId,'"]');e.textContent.includes(":host")&&(e.textContent=e.textContent.replace(/:host\s*\(([^)]+)\)/g,"".concat(n,"$1")).replace(/:host/g,n))}})),u=[],l.executeScripts?o.querySelectorAll("script").forEach(function(e){var t=document.createElement("script");Array.from(e.attributes).forEach(function(e){return t.setAttribute(e.name,e.value)}),t.textContent=e.textContent,u.push(t),e.remove()}):o.querySelectorAll("script").forEach(function(e){return e.remove()}),l.shadow||o.querySelectorAll("slot").forEach(function(e){var t=e.getAttribute("name")||"default",r=document.createElement("div");r.style.display="contents",r.setAttribute("data-acl-slot",t);var o=n?n[t]:null;if(o&&o.length>0)o.forEach(function(e){return r.appendChild(e)});else if(e.childNodes.length>0)for(;e.firstChild;)r.appendChild(e.firstChild);e.replaceWith(r)});o.firstChild;)1===(h=o.firstChild).nodeType&&(h.$props=this.$props),this._root.appendChild(h);return u.forEach(function(e){return r._root.appendChild(e)}),[2]})}).call(this)}},{key:"_setupEventForwarding",value:function(){var e=this;l.forwardEvents.forEach(function(t){e._root.addEventListener(t,function(r){e.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0,detail:r.detail}))})})}},{key:"_updateProp",value:function(e,r){if("data-src"!==e){var n,o=l.attributes[e],i=o&&o.type?o.type:o,a=!0===(o&&o.required),s=o&&o.validator?o.validator:null,c=o&&o.hasOwnProperty("default")?o.default:void 0,u=o&&o.options?o.options:null,h=o&&o.schema?o.schema:null;if(null==r){if(void 0!==c){this.$props[e]=c;return}a&&console.warn('[ACL] Missing required prop "'.concat(e,'" on <').concat(t,">")),this._applyTypeDefault(e,i);return}if(i===Boolean)n=null!==r&&"false"!==r;else if(i===Number){var f=Number(r);n=isNaN(f)?0:f}else if(i===Object||i===Array)try{n=r?JSON.parse(r.replace(/'/g,'"')):i===Array?[]:{}}catch(t){console.warn('[ACL] Attribute "'.concat(e,'" is invalid JSON:'),r),n=i===Array?[]:{}}else n=r;if(u&&Array.isArray(u)&&!u.includes(n)){console.warn('[ACL] Value "'.concat(n,'" is not a valid option for prop "').concat(e,'" on <').concat(t,">. Allowed:"),u),void 0!==c?this.$props[e]=c:void 0===this.$props[e]&&this._applyTypeDefault(e,i);return}if(h&&i===Object&&(void 0===n?"undefined":m(n))==="object"&&null!==n&&Object.entries(h).some(function(e){var t=b(e,2),r=t[0],o=t[1],i=n[r];return void 0===i||(o===String?"string"!=typeof i:o===Number?"number"!=typeof i:o===Boolean?"boolean"!=typeof i:o===Array?!Array.isArray(i):o===Object&&((void 0===i?"undefined":m(i))!=="object"||Array.isArray(i)||null===i))})){console.warn('[ACL] Schema validation failed for prop "'.concat(e,'" on <').concat(t,">.")),void 0!==c?this.$props[e]=c:void 0===this.$props[e]&&this._applyTypeDefault(e,i);return}if(s&&"function"==typeof s&&!s(n)){console.warn('[ACL] Validation failed for prop "'.concat(e,'" on <').concat(t,">. Value:"),n),void 0!==c?this.$props[e]=c:void 0===this.$props[e]&&this._applyTypeDefault(e,i);return}this.$props[e]=n}}},{key:"_applyTypeDefault",value:function(e,t){t===Number?this.$props[e]=0:t===Boolean?this.$props[e]=!1:t===Array?this.$props[e]=[]:t===Object?this.$props[e]={}:this.$props[e]=""}},{key:"_syncAllAttributes",value:function(){var e=this;h.forEach(function(t){return e._updateProp(t,e.getAttribute(t))})}},{key:"_initPersistence",value:function(){var e=this,t=this.getAttribute("persist")||l.persist;if(t){var r="local"===t?localStorage:sessionStorage,n=this.getAttribute("persist-key")||l.persistKey||"acl:".concat(this.localName,":").concat(this.id?":"+this.id:"no-id"),o=parseInt(this.getAttribute("persist-debounce")||l.persistDebounce||"250",10),i=null,a=function(){return Object.fromEntries(Object.entries(e.$props).filter(function(e){var t=b(e,2),r=t[0],n=t[1];return!r.startsWith("$")&&"function"!=typeof n}))},s=function(e){i&&clearTimeout(i),i=null,r.setItem(n,JSON.stringify(e||a()))};this.$props.$persistence={$key:n,$save:function(e){o>0?(i&&clearTimeout(i),i=setTimeout(function(){return s(e)},o)):s(e)},$clear:function(){i&&clearTimeout(i),i=null,r.removeItem(n)},$get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var o=JSON.parse(r.getItem(n));return(e?o[e]:o)||t}catch(e){return t}},$flush:function(){i&&s()}};try{var c=this.$props.$persistence.$get();if(c&&(void 0===c?"undefined":m(c))==="object")for(var u in this.$props)Object.prototype.hasOwnProperty.call(c,u)&&(this.$props[u]=c[u])}catch(e){console.warn("[ACL] Restore failed for ".concat(n),e)}Alpine.effect(function(){return e.$props.$persistence.$save(a())}),o>0&&window.addEventListener("beforeunload",function(){return e.$props.$persistence.$flush()})}}},{key:"_initAlpine",value:function(){return r(function(){var e;return w(this,function(t){return(e=this,window.Alpine)?[2,this._finishAlpineInit()]:[2,new Promise(function(t,r){document.addEventListener("alpine:init",function(){e._finishAlpineInit(),t()},{once:!0}),setTimeout(function(){window.Alpine?(e._finishAlpineInit(),t()):r(Error("Alpine.js not found (Timeout)"))},5e3)})]})}).call(this)}},{key:"_finishAlpineInit",value:function(){var e=this,r=this.getAttribute("bind-store")||l.bindStore;if(r){var n=Alpine.store(r);n?(this.$props&&"object"===m(this.$props)&&Object.keys(this.$props).filter(function(e){return void 0===n[e]}).forEach(function(t){return n[t]=e.$props[t]}),this.$props=n):(console.error('[ACL] Store "'.concat(r,'" not found. Falling back to local state.')),this.$props=window.Alpine.reactive(this.$props||{}))}else this.$props=window.Alpine.reactive(this.$props||{});this._initPersistence(),Alpine.effect(function(){e.$props&&(Object.keys(e.$props).forEach(function(t){"$lastUpdated"!==t&&e.$props[t]}),e.$props.$lastUpdated=Date.now())}),Alpine.store("props_".concat(t,"_").concat(Math.random().toString(36).slice(2)),this.$props),this._root&&this._root.children&&Array.from(this._root.children).forEach(function(t){1===t.nodeType&&(t.$props=e.$props)}),window.Alpine.nextTick(function(){e._root&&window.Alpine.initTree(e._root)})}},{key:"_renderError",value:function(e){var r=document.createElement("div");r.style.cssText=Object.entries(l.errorCss).map(function(e){var t=b(e,2),r=t[0],n=t[1];return"".concat(r.replace(/[A-Z]/g,function(e){return"-".concat(e.toLowerCase())}),":").concat(n)}).join(";");var n=document.createElement("strong");n.textContent="Load Failed: <".concat(t,">");var o=document.createElement("code");o.textContent=e,o.style.display="block",o.style.marginTop="4px",r.appendChild(n),r.appendChild(o),l.shadow?this._root.replaceChildren(r):this._root.appendChild(r)}},{key:"_dispatch",value:function(e){this.dispatchEvent(new CustomEvent(e,{bubbles:!0,composed:!0,detail:{props:this.$props}}))}},{key:"_resolveContent",value:function(t){return r(function(){return w(this,function(r){switch(r.label){case 0:return[4,e.loadTemplate(t,l)];case 1:return[2,r.sent()]}})})()}},{key:"_pruneCache",value:function(){return r(function(){return w(this,function(t){switch(t.label){case 0:return[4,e.pruneCache(l._templateCachePrefix,l._templateCacheKey)];case 1:return[2,t.sent()]}})})()}},{key:"_clearCache",value:function(){return r(function(){return w(this,function(t){switch(t.label){case 0:return[4,e.clearCache(l._templateCacheKey)];case 1:return[2,t.sent()]}})})()}}],[{key:"observedAttributes",get:function(){return h}}]),a}(g(HTMLElement));customElements.define(t,v)}}]),e}();c(S,"_started",!1),c(S,"_registry",new Map),c(S,"_debugger",!1),c(S,"globalConfig",{debug:!1,basePath:"",errorCss:{},shadow:!1,useConstructibleStyles:!0,sharedStyleSheets:[],executeScripts:!0,stripStyles:!1,forwardEvents:[],externalCss:[],externalScripts:[],defaultComponentName:"acl-component",defaultDynamicName:"acl-dynamic",cacheTemplates:!0,_templateCacheVersion:"0.0.1",_templateCachePrefix:"alpine-component-loader-",_templateCacheKey:"alpine-component-loader-0.0.1",_templateCacheExpire:9e5});var k=/*#__PURE__*/function(e){function t(){return o(this,t),n(this,t,arguments)}return u(t,e),s(t,[{key:"connectedCallback",value:function(){return r(function(){var e,t,r,n,o,i,a,s,c,l,u,h,f,p,d,b,y,m;return w(this,function(v){if(!(e=this.getAttribute("src")||this.getAttribute("url")))return console.error("<".concat(this.localName,'>: missing "src" attribute')),[2];if((t=this.getAttribute("tag"))||(t=e.split("/").pop().split(".").shift()),!t.includes("-"))return console.error("<".concat(this.localName,'>: Tag name "').concat(t,'" must contain a hyphen.')),[2];if(r={shadow:this.hasAttribute("shadow")?"false"!==this.getAttribute("shadow"):S.globalConfig.shadow,loading:this.getAttribute("loading")||"eager",dataSrc:this.getAttribute("data-src")||null,bindStore:this.getAttribute("bind-store")||null,fallback:this.getAttribute("fallback")||null,attributes:{}},!customElements.get(t)){n=!0,o=!1,i=void 0;try{for(a=this.attributes[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)c=s.value,["src","url","tag","shadow","loading","class","style","id","data-src","bind-store","fallback"].includes(c.name)||(l=c.value.trim(),u=String,l.startsWith("[")||l.startsWith("{")?u=l.startsWith("[")?Array:Object:"true"===l||"false"===l||""===l?u=Boolean:isNaN(Number(l))||(u=Number),r.attributes[c.name]=u)}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}S.define(t,e,r)}h=document.createElement(t),f=!0,p=!1,d=void 0;try{for(b=this.attributes[Symbol.iterator]();!(f=(y=b.next()).done);f=!0)m=y.value,["src","url","tag","shadow"].includes(m.name)||h.setAttribute(m.name,m.value)}catch(e){p=!0,d=e}finally{try{f||null==b.return||b.return()}finally{if(p)throw d}}for(;this.firstChild;)h.appendChild(this.firstChild);return this.replaceWith(h),[2]})}).call(this)}}]),t}(g(HTMLElement)),O=/*#__PURE__*/function(e){function t(){var e;return o(this,t),(e=n(this,t))._cache=new Map,e}return u(t,e),s(t,[{key:"attributeChangedCallback",value:function(e,t,r){"is"===e&&r&&r!==t&&this._switch(r)}},{key:"connectedCallback",value:function(){this.setAttribute("data-acl-component","acl-dynamic"),!this.firstElementChild&&this.getAttribute("is")&&this._switch(this.getAttribute("is"))}},{key:"disconnectedCallback",value:function(){this._cache.forEach(function(e){e._root&&window.Alpine&&window.Alpine.destroyTree(e._root)}),this._cache.clear()}},{key:"_switch",value:function(e){return r(function(){var t,r,n;return w(this,function(o){switch(o.label){case 0:if(!e)return[2];if(e=e.toLowerCase(),t=this.hasAttribute("keep-alive"),!(r=this.firstElementChild))return[3,2];return r.style.transition="opacity 0.1s ease-out",r.style.opacity="0",[4,new Promise(function(e){return setTimeout(e,100)})];case 1:o.sent(),o.label=2;case 2:if(r&&t?(r._savedScroll=r.scrollTop,r._isKeptAlive=!0,this._cache.set(r.tagName.toLowerCase(),r),r.remove(),r.style.opacity="",r.style.transition="",r._isKeptAlive=!1):(this.replaceChildren(),r&&!t&&this._cache.delete(r.tagName.toLowerCase())),t&&this._cache.has(e))(n=this._cache.get(e))._savedScroll&&setTimeout(function(){return n.scrollTop=n._savedScroll},0);else try{n=document.createElement(e),Array.from(this.attributes).forEach(function(e){["is","keep-alive"].includes(e.name)||n.setAttribute(e.name,e.value)})}catch(t){console.error("[ACL] Failed to create: <".concat(e,">"),t)}return n&&(n.style.opacity="0",n.style.transition="opacity 0.1s ease-in",this.appendChild(n),requestAnimationFrame(function(){n.style.opacity="1",setTimeout(function(){n.style.transition="",n.style.opacity=""},100)})),[2]}})}).call(this)}}],[{key:"observedAttributes",get:function(){return["is"]}}]),t}(g(HTMLElement));try{"loading"===document.readyState?window.addEventListener("DOMContentLoaded",S.start,{once:!0}):S.start()}catch(e){console.warn("[ACL] Failed to register components:",e)}export{S as default};

//# sourceMappingURL=AlpineComponentLoader.min.js.map