{"version":3,"sources":["../src/index.js"],"names":["styleSheetCache","Map","scriptLoadCache","typeMap","String","Number","Boolean","Array","Object","position","zIndex","background","color","padding","borderRadius","fontSize","fontFamily","pointerEvents","border","boxShadow","maxWidth","whiteSpace","display","top","left","width","height","overflow","boxSizing","transition","toCssString","styleObj","entries","map","k","v","replace","m","toLowerCase","join","AlpineComponentLoader","start","_started","pruneCaches","registerComponent","registerDynamicLoader","registerTemplates","prefix","current","globalConfig","_templateCachePrefix","_templateCacheKey","window","Promise","all","caches","keys","filter","key","startsWith","delete","clearCache","console","warn","config","options","assign","name","defaultComponentName","customElements","get","define","AlpineDeclarativeLoader","defaultDynamicName","AlpineDynamicLoader","document","querySelectorAll","forEach","tpl","tagName","getAttribute","attributes","fromEntries","JSON","parse","val","type","e","toggleDebug","active","debug","body","classList","toggle","tooltip","getElementById","createElement","id","style","cssText","titleNode","hr","margin","borderBottom","statusNode","propsNode","append","_nodes","title","status","props","appendChild","overlayContainer","mouseX","mouseY","hoveredElement","onMouseMove","clientX","clientY","composedPath","find","node","nodeType","hasAttribute","addEventListener","passive","renderLoop","replaceChildren","removeEventListener","components","children","usedBoxCount","el","rect","getBoundingClientRect","nodes","shadowRoot","length","minX","Infinity","minY","maxX","maxY","found","cRect","child","Math","min","max","right","bottom","innerHeight","innerWidth","box","transform","i","textContent","_loading","stringify","$props","tRect","winW","winH","requestAnimationFrame","source","settings","loading","hooks","beforeFetch","opts","afterFetch","data","externalCss","externalScripts","sharedStyleSheets","errorCss","flexDirection","gap","backgroundColor","forwardEvents","fallback","persist","persistKey","persistDebounce","bindStore","dataSrc","fetchTimeout","fetchOptions","observedAttrs","Set","contentSource","basePath","AlpineExternalComponent","$emit","detail","dispatchEvent","CustomEvent","bubbles","composed","_initialized","_disconnectTimeout","_fetchAbortController","Alpine","reactive","$data","$loading","$error","error","_root","shadow","attachShadow","mode","_observer","_scopeId","random","toString","slice","_slotObserver","attributeChangedCallback","oldVal","newVal","_fetchData","_updateProp","_triggerHook","connectedCallback","setAttribute","clearTimeout","_syncAllAttributes","loadMode","_initLazyObserver","_initIdleLoader","_load","disconnectedCallback","disconnect","_isKeptAlive","setTimeout","isConnected","abort","destroyTree","placeholder","minHeight","IntersectionObserver","isIntersecting","rootMargin","observe","requestIdleCallback","timeout","_initSlotObserver","MutationObserver","mutations","mutation","addedNodes","Node","ELEMENT_NODE","TEXT_NODE","slotName","container","querySelector","childList","content","lightSlots","err","fallbackSource","fallbackErr","_loadExternalDependencies","resolve","_resolveContent","_captureLightSlots","url","link","rel","href","_renderSafe","_setupEventForwarding","_initAlpine","_dispatch","_renderError","message","signal","timeoutId","modifiedOptions","res","contentType","json","modified","AbortController","method","headers","fetch","ok","Error","statusText","includes","aborted","reason","hookName","call","root","promises","head","has","p","reject","script","src","async","onload","onerror","set","push","slots","default","from","childNodes","rootNode","styles","combinedCss","sheet","scripts","DOMParser","parseFromString","cloneNode","stripStyles","remove","useConstructibleStyles","adoptedStyleSheets","s","trim","CSSStyleSheet","replaceSync","executeScripts","oldScript","newScript","attr","value","slotEl","anchor","nodesToInsert","firstChild","replaceWith","eventName","parsedValue","configDef","required","validator","defaultValue","hasOwnProperty","undefined","_applyTypeDefault","num","isNaN","_initPersistence","storage","localStorage","sessionStorage","localName","debounceMs","parseInt","_timer","getSnapshot","saveNow","setItem","$persistence","$key","$save","$clear","removeItem","$get","stored","getItem","$flush","prototype","effect","_finishAlpineInit","once","storeName","store","nextTick","initTree","msg","header","code","marginTop","useCache","faH","_cache","match","fetchedAt","clone","HTMLTemplateElement","cacheTemplates","open","Date","now","_templateCacheExpire","text","cache","Headers","put","Response","_pruneCache","pruneCache","_clearCache","observedAttributes","HTMLElement","_templateCacheVersion","inferredType","realElement","split","pop","shift","_switch","firstElementChild","clear","tag","keepAlive","_savedScroll","scrollTop","readyState"],"mappings":"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","file":"AlpineComponentLoader.min.js","sourcesContent":["/**\n * @license AlpineComponentLoader\n *\n * Copyright (c) LTDev LLC\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Cache for constructible stylesheets (Internal styles only)\nconst styleSheetCache = new Map();\n\n// Cache for External Script loading states (Prevent duplicate execution)\nconst scriptLoadCache = new Map();\n\n// Type map for prop attribute definitions\nconst typeMap = {\n    'String': String,\n    'Number': Number,\n    'Boolean': Boolean,\n    'Array': Array,\n    'Object': Object\n};\n\n// CSS for debugger\nconst debuggerCss = {\n    tooltip: {\n        position: 'fixed',\n        zIndex: 10000,\n        background: '#1f2937',\n        color: '#f3f4f6',\n        padding: '8px 12px',\n        borderRadius: '6px',\n        fontSize: '11px',\n        fontFamily: 'monospace',\n        pointerEvents: 'none',\n        border: '1px solid #374151',\n        boxShadow: '0 4px 6px -1px rgba(0,0,0,0.1)',\n        maxWidth: '300px',\n        whiteSpace: 'pre-wrap',\n        display: 'none',\n    },\n    overlay: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        pointerEvents: 'none',\n        zIndex: 9998,\n        overflow: 'hidden'\n    },\n    overlayBoxes: {\n        position: 'absolute',\n        border: '3px solid #22c55e',\n        boxSizing: 'border-box',\n        transition: 'all 0.1s ease-out'\n    }\n};\n\n// Helper to convert JS style objects to CSS strings\nconst toCssString = (styleObj) => {\n    return Object.entries(styleObj)\n        .map(([k, v]) => `${k.replace(/[A-Z]/g, m => `-${m.toLowerCase()}`)}:${v}`)\n        .join(';');\n};\n\nexport default class AlpineComponentLoader {\n    static _started = false;\n\n    // Global default configuration\n    static globalConfig = {\n        debug: false,\n        basePath: '',\n        errorCss: {},\n        shadow: false,\n        useConstructibleStyles: true,\n        sharedStyleSheets: [],\n        executeScripts: true,\n        stripStyles: false,\n        forwardEvents: [],\n        externalCss: [],\n        externalScripts: [],\n        defaultComponentName: 'acl-component',\n        defaultDynamicName: 'acl-dynamic',\n\n        // Template caching\n        cacheTemplates: true,\n        _templateCacheVersion: '0.0.1',\n        _templateCachePrefix: 'alpine-component-loader-',\n        _templateCacheKey: `alpine-component-loader-0.0.1`,\n        _templateCacheExpire: 15 * 60 * 1000, // 15 minutes\n    };\n\n    // Start loading components + setup component proxy\n    static async start() {\n        if (AlpineComponentLoader._started)\n            return;\n        AlpineComponentLoader._started = true;\n\n        // Cleanup old caches\n        await AlpineComponentLoader.pruneCaches();\n\n        // Register default components\n        AlpineComponentLoader.registerComponent();\n        AlpineComponentLoader.registerDynamicLoader();\n        AlpineComponentLoader.registerTemplates();\n    }\n\n    // Clear caches from unmatched versions\n    static async pruneCaches(prefix = AlpineComponentLoader.globalConfig._templateCachePrefix, current = AlpineComponentLoader.globalConfig._templateCacheKey) {\n        if (!('caches' in window))\n            return;\n        return await Promise.all((await caches.keys())\n            .filter(key => key.startsWith(prefix))\n            .filter(key => key !== current)\n            .map(key => caches.delete(key)));\n    }\n\n    // Manually clear all template caches\n    static async clearCache(current = AlpineComponentLoader.globalConfig._templateCacheKey) {\n        if (!('caches' in window)) {\n            console.warn('[AlpineComponentLoader] Cache API not supported.');\n            return;\n        }\n\n        // Clear all caches with the specified prefix\n        return await Promise.all((await caches.keys())\n            .filter(key => key.startsWith(current))\n            .map(key => caches.delete(key)));\n    }\n\n    // Update global configuration\n    static config(options) {\n        Object.assign(AlpineComponentLoader.globalConfig, options);\n    }\n\n    // Register default custom component\n    static registerComponent(name = AlpineComponentLoader.globalConfig.defaultComponentName) {\n        if (!customElements.get(name))\n            customElements.define(name, AlpineDeclarativeLoader);\n    }\n\n    // Register default dynamic loader\n    static registerDynamicLoader(name = AlpineComponentLoader.globalConfig.defaultDynamicName) {\n        if (!customElements.get(name))\n            customElements.define(name, AlpineDynamicLoader);\n    }\n\n    // Auto-discover <template acl-component=\"name\"> elements\n    static registerTemplates() {\n        document.querySelectorAll('template[acl-component]').forEach(tpl => {\n            const tagName = tpl.getAttribute('acl-component');\n            if (!tagName)\n                return;\n\n            // Parse acl-props attribute as JSON\n            let config;\n            try {\n                config = {\n                    attributes: Object.fromEntries(Object.entries(JSON.parse(tpl.getAttribute('acl-props') || '{}')).map(([key, val]) => [\n                        key,\n                        (typeof val === 'object' && val.type) ? {\n                            ...val,\n                            type: typeMap[val.type] || String\n                        } : (typeMap[val] || String)\n                    ]))\n                }\n            } catch (e) {\n                console.warn(`[AlpineComponentLoader] Invalid JSON in acl-props for <${tagName}>`, e);\n            }\n\n            // Define the component\n            AlpineComponentLoader.define(tagName, tpl, config || {});\n        });\n    }\n\n    // Toggle the built-in debugger\n    static toggleDebug() {\n        const active = (this.globalConfig.debug = !this.globalConfig.debug);\n        document.body.classList.toggle('acl-debug-active', active);\n\n        // Create the tooltip element if it doesn't exist\n        let tooltip = document.getElementById('acl-debug-tooltip');\n        if (!tooltip) {\n            tooltip = document.createElement('div');\n            tooltip.id = 'acl-debug-tooltip';\n            tooltip.style.cssText = toCssString(debuggerCss.tooltip);\n\n            // Title\n            const titleNode = document.createElement('strong');\n            titleNode.style.color = '#4ade80';\n\n            // Title separator\n            const hr = document.createElement('div');\n            hr.style.margin = '4px 0';\n            hr.style.borderBottom = '1px solid #374151';\n\n            // Status info\n            const statusNode = document.createElement('div');\n\n            // Prop info\n            const propsNode = document.createElement('pre');\n            propsNode.style.cssText = 'margin: 4px 0 0 0; opacity: 0.8;';\n\n            // Append once\n            tooltip.append(titleNode, hr, statusNode, propsNode);\n\n            // Save references for fast updates\n            tooltip._nodes = { title: titleNode, status: statusNode, props: propsNode };\n\n            // Append to body\n            document.body.appendChild(tooltip);\n        }\n\n        // Create the overlay container if it doesn't exist\n        let overlayContainer = document.getElementById('acl-debug-overlays');\n        if (!overlayContainer) {\n            overlayContainer = document.createElement('div');\n            overlayContainer.id = 'acl-debug-overlays';\n            overlayContainer.style.cssText = toCssString(debuggerCss.overlay);\n            document.body.appendChild(overlayContainer);\n        }\n\n        // State management, tracking hovered component + mouse position\n        let mouseX = 0,\n            mouseY = 0,\n            hoveredElement = null;\n\n        // Lightweight mouse listener for finding hovered component + mouse position\n        const onMouseMove = (e) => {\n            mouseX = e.clientX;\n            mouseY = e.clientY;\n\n            // Find hovered component (handling Shadow DOM)\n            hoveredElement = (e.composedPath() || []).find(node => node.nodeType === 1 && node.hasAttribute('data-acl-component'));\n        };\n\n        // If active, start debugging!\n        if (active) {\n            document.addEventListener('mousemove', onMouseMove, { passive: true });\n\n            // Render loop, with throttling, handles overlay + tooltip\n            const renderLoop = () => {\n                if (!AlpineComponentLoader.globalConfig.debug) {\n                    overlayContainer.replaceChildren(); // Cleanup\n                    tooltip.style.display = 'none';\n                    document.removeEventListener('mousemove', onMouseMove);\n                    return;\n                }\n\n                // Overlay logic (DOM Pooling) for component positions\n                const components = document.querySelectorAll('[data-acl-component]'),\n                    children = overlayContainer.children;\n                let usedBoxCount = 0;\n\n                // Measure all components recursively to find visible areas\n                components.forEach((el) => {\n                    let rect = el.getBoundingClientRect();\n\n                    // Attempt to find visible area of children for collapsed elements\n                    if (rect.width === 0 && rect.height === 0) {\n                        const nodes = el.shadowRoot ? el.shadowRoot.children : el.children;\n                        if (nodes.length > 0) {\n                            let minX = Infinity,\n                                minY = Infinity,\n                                maxX = -Infinity,\n                                maxY = -Infinity,\n                                found = false;\n\n                            // Measure children recursively until we find a valid visible area\n                            for (const child of nodes) {\n                                const cRect = child.getBoundingClientRect();\n                                if (cRect.width > 0 || cRect.height > 0) {\n                                    found = true;\n                                    minX = Math.min(minX, cRect.left);\n                                    minY = Math.min(minY, cRect.top);\n                                    maxX = Math.max(maxX, cRect.right);\n                                    maxY = Math.max(maxY, cRect.bottom);\n                                }\n                            }\n\n                            // Found a valid visible area, use it\n                            if (found)\n                                rect = {\n                                    left: minX,\n                                    top: minY,\n                                    width: maxX - minX,\n                                    height: maxY - minY\n                                };\n                        }\n                    }\n\n                    // Only draw if we have a valid visible area\n                    if (rect.width > 0 && rect.height > 0 &&\n                        rect.top < window.innerHeight &&\n                        rect.left < window.innerWidth &&\n                        (rect.top + rect.height) > 0 &&\n                        (rect.left + rect.width) > 0\n                    ) {\n                        // Reuse existing box or create new one\n                        let box = children[usedBoxCount];\n                        if (!box) {\n                            box = document.createElement('div');\n                            box.style.cssText = toCssString(debuggerCss.overlayBoxes);\n                            overlayContainer.appendChild(box);\n                        }\n\n                        // Fast style update\n                        box.style.transform = `translate(${rect.left}px, ${rect.top}px)`;\n                        box.style.width = `${rect.width}px`;\n                        box.style.height = `${rect.height}px`;\n                        box.style.display = 'block'; // Ensure it's visible\n\n                        // Count the used boxes\n                        usedBoxCount++;\n                    }\n                });\n\n                // Hide unused boxes in the pool\n                for (let i = usedBoxCount; i < children.length; i++)\n                    children[i].style.display = 'none';\n\n                // Tooltip logic, apply position + content\n                if (hoveredElement) {\n                    tooltip.style.display = 'block';\n\n                    // Content Update\n                    tooltip._nodes.title.textContent = `<${hoveredElement.getAttribute('data-acl-component')}>`;\n                    tooltip._nodes.status.textContent = hoveredElement._loading ? 'Loading...' : 'Ready';\n                    tooltip._nodes.status.style.color = hoveredElement._loading ? '#fbbf24' : '#4ade80';\n\n                    // Display all props\n                    tooltip._nodes.props.textContent = JSON.stringify(hoveredElement.$props, null, 2);\n\n                    // Base position information\n                    const offset = 15,\n                        tRect = tooltip.getBoundingClientRect(),\n                        winW = window.innerWidth,\n                        winH = window.innerHeight;\n\n                    // Initial positioning\n                    let left = mouseX + offset,\n                        top = mouseY + offset;\n\n                    // Keep tooltip on screen within offset\n                    if (left + tRect.width > winW)\n                        left = mouseX - tRect.width - offset;\n                    if (top + tRect.height > winH)\n                        top = mouseY - tRect.height - offset;\n                    if (left < 0)\n                        left = offset;\n                    if (top < 0)\n                        top = offset;\n\n                    // Update position\n                    tooltip.style.left = `${left}px`;\n                    tooltip.style.top = `${top}px`;\n                } else {\n                    tooltip.style.display = 'none';\n                }\n                requestAnimationFrame(renderLoop);\n            };\n            requestAnimationFrame(renderLoop);\n        }\n    }\n\n    // Define a new component from a URL, ID, or Template element\n    static define(tagName, source, config = {}) {\n        // Merge defaults, global config, and instance config\n        const settings = {\n            attributes: {},\n            loading: 'eager',\n            hooks: {\n                beforeFetch: (opts) => opts,\n                afterFetch: (data) => data,\n            },\n            ...AlpineComponentLoader.globalConfig,\n            ...config,\n            externalCss: [\n                ...(AlpineComponentLoader.globalConfig.externalCss || []),\n                ...(config.externalCss || [])\n            ],\n            externalScripts: [\n                ...(AlpineComponentLoader.globalConfig.externalScripts || []),\n                ...(config.externalScripts || [])\n            ],\n            sharedStyleSheets: [\n                ...(AlpineComponentLoader.globalConfig.sharedStyleSheets || []),\n                ...(config.sharedStyleSheets || [])\n            ],\n            errorCss: {\n                ...{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    gap: '0.5rem',\n                    padding: '1rem',\n                    border: '1px solid #fca5a5',\n                    backgroundColor: '#fee2e2',\n                    color: '#991b1b',\n                    borderRadius: '6px',\n                    fontFamily: 'sans-serif',\n                    fontSize: '0.9rem'\n                },\n                ...(AlpineComponentLoader.globalConfig.errorCss || {}),\n                ...(config.errorCss || {})\n            },\n            forwardEvents: [\n                ...(AlpineComponentLoader.globalConfig.forwardEvents || []),\n                ...(config.forwardEvents || [])\n            ],\n            fallback: config.fallback || null,\n            persist: config.persist || false,\n            persistKey: config.persistKey || null,\n            persistDebounce: config.persistDebounce || 250,\n            bindStore: config.bindStore || null,\n            dataSrc: config.dataSrc || null,\n            fetchTimeout: config.fetchTimeout || 30000,\n            fetchOptions: config.fetchOptions || {},\n        };\n\n        // Track observed attributes internally\n        const observedAttrs = [\n            ...new Set([\n                ...Object.keys(settings.attributes),\n                'bind-store',\n                'data-src',\n            ]),\n        ];\n\n        // Prepend base path if source is a URL string\n        let contentSource = source;\n        if (typeof source === 'string' && !source.startsWith('#') && settings.basePath)\n            contentSource = settings.basePath + source;\n\n        // Create component class\n        class AlpineExternalComponent extends HTMLElement {\n            constructor() {\n                super();\n\n                // Helper to emit events via $el.$props.$emit\n                const $emit = (name, detail) => {\n                    this.dispatchEvent(new CustomEvent(name, {\n                        bubbles: true,\n                        composed: true,\n                        detail\n                    }));\n                };\n\n                // Initialize state and attributes\n                this._initialized = false;\n                this._loading = false;\n                this._disconnectTimeout = null;\n                this._fetchAbortController = null;\n                this.$props = window.Alpine ? window.Alpine.reactive({\n                    $data: null,\n                    $loading: false,\n                    $error: null,\n                    $emit,\n                    ...settings.attributes || {}\n                }) : {\n                    data: null,\n                    loading: false,\n                    error: null,\n                    $emit,\n                };\n                this._root = settings.shadow ? this.attachShadow({ mode: 'open' }) : this;\n                this._observer = null;\n                this._scopeId = `scope-${Math.random().toString(36).slice(2, 9)}`;\n                this._slotObserver = null; // Initialize observer reference\n            }\n\n            // Define observed attributes\n            static get observedAttributes() {\n                return observedAttrs;\n            }\n\n            // Reactively update props when attributes change\n            attributeChangedCallback(name, oldVal, newVal) {\n                if (oldVal === newVal)\n                    return;\n\n                // Update prop and validate\n                if (name === 'data-src') {\n                    if (this._initialized)\n                        this._fetchData(newVal);\n                } else {\n                    this._updateProp(name, newVal);\n                }\n\n                // Lifecycle: Updated\n                if (this._initialized)\n                    this._triggerHook('updated', { name, oldVal, newVal });\n            }\n\n            // Initialize on insertion\n            connectedCallback() {\n                this.setAttribute('data-acl-component', this.tagName);\n\n                // If we are just moving nodes, the disconnect timer is still running\n                // We clear it so the component stays alive\n                if (this._disconnectTimeout) {\n                    clearTimeout(this._disconnectTimeout);\n                    this._disconnectTimeout = null;\n                    return; // It was just a move, do nothing.\n                }\n\n                // If kept-alive and already initialized, just reactivate\n                if (this._initialized) {\n                    this._triggerHook('activated');\n                    return;\n                }\n\n                // Guard against parallel loading or already initialized states\n                if (this._loading)\n                    return;\n\n                // Lock loading state\n                this._loading = true;\n\n                // Sync attributes immediately for eager loading\n                this._syncAllAttributes();\n\n                // Check loading mode and load\n                const loadMode = this.getAttribute('loading') || settings.loading;\n                if (loadMode === 'lazy')\n                    this._initLazyObserver();\n                else if (loadMode === 'idle')\n                    this._initIdleLoader();\n                else\n                    this._load();\n            }\n\n            // Cleanup memory on removal\n            disconnectedCallback() {\n                // Stop observing slots\n                if (this._slotObserver) {\n                    this._slotObserver.disconnect();\n                    this._slotObserver = null;\n                }\n\n                // If flagged with keep-alive, skip destruction\n                if (this._isKeptAlive || this.hasAttribute('keep-alive')) {\n                    this._triggerHook('deactivated');\n                    return;\n                }\n\n                // Don't destroy immediately; give moves/rewrites time to reattach\n                this._disconnectTimeout = setTimeout(() => {\n                    // If we got re-attached after a slower move, abort cleanup\n                    if (this.isConnected) {\n                        this._disconnectTimeout = null;\n                        return;\n                    }\n\n                    // Lifecycle: Unmounted\n                    this._triggerHook('unmounted');\n\n                    // Cancel any pending fetches\n                    if (this._fetchAbortController)\n                        this._fetchAbortController.abort();\n                    if (this._observer)\n                        this._observer.disconnect();\n                    if (this._root && window.Alpine && this._initialized)\n                        window.Alpine.destroyTree(this._root);\n\n                    // Reset state so the component can revive if re-attached\n                    this._initialized = false;\n                    this._loading = false;\n                    this._disconnectTimeout = null;\n                }, 250);\n            }\n\n            // intersectionObserver for lazy loading\n            _initLazyObserver() {\n                const placeholder = document.createElement('div');\n                placeholder.style.minHeight = '1px';\n                this._root.appendChild(placeholder);\n                this._observer = new IntersectionObserver((entries) => {\n                    if (entries[0].isIntersecting) {\n                        this._load();\n                        this._observer.disconnect();\n                        this._observer = null; // Kill the observer reference\n                    }\n                }, { rootMargin: '100px' });\n                this._observer.observe(this);\n            }\n\n            // Idle loading strategy\n            _initIdleLoader() {\n                if ('requestIdleCallback' in window) {\n                    requestIdleCallback(() => this._load(), { timeout: 2000 });\n                } else {\n                    setTimeout(() => this._load(), 200);\n                }\n            }\n\n            // Initialize MutationObserver for dynamic Light DOM slots\n            _initSlotObserver() {\n                if (this._slotObserver)\n                    return;\n\n                this._slotObserver = new MutationObserver((mutations) => mutations.forEach(mutation => {\n                    mutation.addedNodes.forEach(node => {\n                        // Only handle Elements and Text nodes\n                        if (node.nodeType !== Node.ELEMENT_NODE && node.nodeType !== Node.TEXT_NODE)\n                            return;\n\n                        // Ignore the slot containers themselves if they trigger an add\n                        if (node.nodeType === Node.ELEMENT_NODE && node.hasAttribute('data-acl-slot'))\n                            return;\n\n                        // Determine target slot name + find the internal slot container\n                        const slotName = (node.nodeType === Node.ELEMENT_NODE ? node.getAttribute('slot') : null) || 'default',\n                            container = this._root.querySelector(`div[data-acl-slot=\"${slotName}\"]`);\n\n                        // Move the node into the container\n                        if (container)\n                            container.appendChild(node);\n                    });\n                }));\n\n                // Only observe direct children additions\n                this._slotObserver.observe(this, { childList: true });\n            }\n\n            // Main load sequence\n            async _load() {\n                try {\n                    // Lock loading state\n                    if (this._initialized)\n                        return;\n\n                    // Lifecycle: Before Mount\n                    this._triggerHook('beforeMount');\n\n                    // Load external dependencies, get content, and data if needed\n                    const promises = [\n                        (settings.externalCss.length || settings.externalScripts.length) ? this._loadExternalDependencies() : Promise.resolve(),\n                        this._resolveContent(contentSource),\n                        (settings.dataSrc || this.getAttribute('data-src')) ? this._fetchData(this.getAttribute('data-src') || settings.dataSrc) : Promise.resolve(),\n                    ];\n\n                    // Get content from the resolved source\n                    const content = (await Promise.all(promises))[1];\n\n                    // Capture existing children for slotting if using Light DOM\n                    let lightSlots = null;\n                    if (!settings.shadow)\n                        lightSlots = this._captureLightSlots();\n\n                    // Strict clear of root element\n                    this._root.replaceChildren();\n\n                    // Inject CSS Links into Shadow (Apply Styles locally)\n                    if (settings.shadow && settings.externalCss.length) {\n                        settings.externalCss.forEach(url => {\n                            const link = document.createElement('link');\n                            link.rel = 'stylesheet';\n                            link.href = url;\n                            this._root.appendChild(link);\n                        });\n                    }\n\n                    // Render content safely\n                    await this._renderSafe(content, lightSlots);\n\n                    // Setup event bubbling for Shadow DOM\n                    if (settings.shadow && settings.forwardEvents.length > 0)\n                        this._setupEventForwarding();\n\n                    // Start observing Light DOM for dynamic updates\n                    if (!settings.shadow)\n                        this._initSlotObserver();\n\n                    // Initialize Alpine\n                    await this._initAlpine();\n\n                    // Mark success and unlock\n                    this._initialized = true;\n                    this._loading = false;\n\n                    // Lifecycle: Mounted\n                    this._dispatch('mount');\n                    this._triggerHook('mounted');\n\n                    //Dispatch 'loaded' event\n                    this._dispatch('loaded');\n                } catch (err) {\n                    console.error(`[AlpineComponentLoader] <${tagName}>`, err);\n                    this._loading = false; // Unlock on error so we can retry\n                    const fallbackSource = this.getAttribute('fallback') || settings.fallback;\n                    if (fallbackSource) {\n                        try {\n                            // Clear failed state\n                            this._root.replaceChildren();\n\n                            // Render fallback; pass null for slots as fallback usually doesn't slot user content\n                            await this._renderSafe(await this._resolveContent(fallbackSource), null);\n\n                            // Init Alpine (so fallback can be interactive)\n                            await this._initAlpine();\n\n                            // Mark success and unlock\n                            this._initialized = true;\n\n                            // Dispatch 'loaded' event\n                            this._dispatch('loaded');\n\n                            // Stop here, do not render default error\n                            return;\n                        } catch (fallbackErr) {\n                            console.error(`[AlpineComponentLoader] <${tagName}> Fallback Failed:`, fallbackErr);\n                            // If fallback fails, show original error (or combined)\n                            this._renderError(`Load Failed: ${err.message}. (Fallback also failed)`);\n                        }\n                    } else {\n                        // Standard Error Display\n                        this._renderError(err.message);\n                    }\n                }\n            }\n\n            // Handle data fetching for APIs\n            async _fetchData(url) {\n                if (!url)\n                    return;\n\n                // Abort previous request (Fixes Race Conditions)\n                if (this._fetchAbortController)\n                    this._fetchAbortController.abort();\n                this._fetchAbortController = new AbortController();\n                const signal = this._fetchAbortController.signal;\n\n                // Set Loading State\n                this.$props.$loading = true;\n                this.$props.$error = null;\n\n                // Setup Timeout\n                const timeoutId = setTimeout(() => this._fetchAbortController.abort('Timeout'), settings.fetchTimeout);\n\n                try {\n                    // Prepare Options\n                    let options = {\n                        method: 'GET',\n                        headers: { 'Accept': 'application/json' },\n                        ...AlpineComponentLoader.globalConfig?.fetchOptions || {},\n                        ...settings?.fetchOptions || {},\n                        signal\n                    };\n\n                    // Allows modifying headers (Auth) or options before sending\n                    if (typeof settings?.hooks?.beforeFetch === 'function') {\n                        const modifiedOptions = await settings.hooks.beforeFetch(options);\n                        if (modifiedOptions && typeof modifiedOptions === 'object')\n                            options = modifiedOptions;\n                    }\n\n                    // Merge options (global + instance) for Fetch request\n                    const res = await fetch(url, options);\n\n                    // Clear the fetch timeout\n                    clearTimeout(timeoutId);\n\n                    // Validate response\n                    if (!res.ok)\n                        throw new Error(`API Error: ${res.status} ${res.statusText}`);\n\n                    // Validate Content Type\n                    const contentType = res.headers.get(\"content-type\");\n                    if (!contentType || !contentType.includes(\"application/json\"))\n                        throw new Error(`Invalid response. Expected JSON, got \"${contentType}\"`);\n\n                    // Parse JSON\n                    let json;\n                    try {\n                        json = await res.json();\n                    } catch (e) {\n                        throw new Error(`Invalid JSON: ${e.message}`);\n                    }\n\n                    // Allows transforming data (filtering, formatting) before assignment\n                    if (typeof settings?.hooks?.afterFetch === 'function') {\n                        let modified = await settings.hooks.afterFetch(json);\n                        if (modified && typeof modified === 'object')\n                            json = modified;\n                    }\n\n                    // Only update if not aborted\n                    if (!signal.aborted)\n                        this.$props.$data = json;\n                } catch (e) {\n                    // Handle Aborts vs Real Errors\n                    if (e.name === 'AbortError' || signal.aborted) {\n                        if (signal.reason === 'Timeout') {\n                            this.$props.$error = `Request timed out after ${settings.fetchTimeout}ms`;\n                            this.$props.$data = null;\n                        }\n                        return;\n                    }\n                    console.error(`[AlpineComponentLoader] Fetch failed for ${url}`, e);\n                    this.$props.$error = e.message;\n                    this.$props.$data = null;\n                } finally {\n                    // Cleanup\n                    clearTimeout(timeoutId);\n\n                    // Only turn off loading if this request wasn't superseded by a new one\n                    if (!signal.aborted || signal.reason === 'Timeout') {\n                        this.$props.$loading = false;\n                        if (this._fetchAbortController?.signal === signal)\n                            this._fetchAbortController = null;\n                    }\n                }\n            }\n\n            // Helper to execute hooks\n            _triggerHook(hookName, detail = {}) {\n                if (settings.hooks && typeof settings.hooks[hookName] === 'function') {\n                    settings.hooks[hookName].call(this, {\n                        el: this,\n                        root: this._root,\n                        props: this.$props,\n                        ...detail\n                    });\n                }\n            }\n\n            // Load external CSS/JS dependencies\n            async _loadExternalDependencies() {\n                const promises = [];\n\n                // CSS: Always inject into global head\n                // This ensures @font-face and @keyframes are registered globally\n                settings.externalCss.forEach(url => {\n                    // Check if link exists in head\n                    if (!document.querySelector(`link[href=\"${url}\"]`)) {\n                        const link = document.createElement('link');\n                        link.rel = 'stylesheet';\n                        link.href = url;\n                        document.head.appendChild(link);\n                    }\n                });\n\n                // Scripts: Only inject if not already loaded\n                // This ensures scripts are loaded in the correct order\n                settings.externalScripts.forEach(url => {\n                    if (!scriptLoadCache.has(url)) {\n                        const p = new Promise((resolve, reject) => {\n                            if (document.querySelector(`script[src=\"${url}\"]`)) {\n                                resolve();\n                                return;\n                            }\n                            const script = document.createElement('script');\n                            script.src = url;\n                            script.async = true;\n                            script.onload = () => resolve();\n                            script.onerror = () => reject(new Error(`Failed to load script: ${url}`));\n                            document.head.appendChild(script);\n                        });\n                        scriptLoadCache.set(url, p);\n                    }\n                    promises.push(scriptLoadCache.get(url));\n                });\n\n                // Wait for all promises\n                await Promise.all(promises);\n            }\n\n            // Manual slot polyfill for Light DOM\n            _captureLightSlots() {\n                const slots = { default: [] };\n                Array.from(this.childNodes).forEach(node => {\n                    if (node.nodeType === Node.ELEMENT_NODE && node.hasAttribute('slot')) {\n                        const name = node.getAttribute('slot');\n                        if (!slots[name])\n                            slots[name] = [];\n                        slots[name].push(node);\n                    } else {\n                        slots.default.push(node);\n                    }\n                });\n                return slots;\n            }\n\n            // Render logic using DOM manipulation\n            async _renderSafe(content, lightSlots) {\n                let rootNode;\n\n                // Parse string to DOM if needed, otherwise clone fragment\n                if (typeof content === 'string')\n                    rootNode = ((new DOMParser()).parseFromString(content, 'text/html')).body;\n                else\n                    rootNode = content.cloneNode(true);\n\n                // Process styles (Constructible, Scoping, or Stripping)\n                if (!settings.stripStyles) {\n                    const styles = Array.from(rootNode.querySelectorAll('style'));\n\n                    // Feature: Constructible Stylesheets (Shadow DOM only)\n                    if (settings.shadow && settings.useConstructibleStyles && document.adoptedStyleSheets) {\n                        const combinedCss = styles.map(s => s.textContent).join('\\n');\n                        let sheet = null;\n\n                        if (combinedCss.trim().length > 0) {\n                            if (styleSheetCache.has(combinedCss)) {\n                                sheet = styleSheetCache.get(combinedCss);\n                            } else {\n                                sheet = new CSSStyleSheet();\n                                sheet.replaceSync(combinedCss);\n                                styleSheetCache.set(combinedCss, sheet);\n                            }\n                        }\n\n                        // Apply shared + internal styles\n                        this._root.adoptedStyleSheets = [\n                            ...(settings.sharedStyleSheets || []),\n                            ...(sheet ? [sheet] : [])\n                        ];\n\n                        // Remove style tags since we moved them to adoptedStyleSheets\n                        styles.forEach(el => el.remove());\n                    } else {\n                        // Fallback: Standard tag injection + Scoping\n                        styles.forEach(style => {\n                            if (!settings.shadow) {\n                                // Native @scope support\n                                if ('CSSScopeRule' in window) {\n                                    style.textContent = `@scope { ${style.textContent.replace(/:host/g, ':scope')} }`;\n                                } else {\n                                    this.setAttribute('data-scope', this._scopeId);\n\n                                    // Rewrite :host to data-scope attribute\n                                    if (style.textContent.includes(':host'))\n                                        style.textContent = style.textContent.replace(/:host/g, `${tagName}[data-scope=\"${this._scopeId}\"]`);\n                                }\n                            }\n                        });\n                    }\n                } else {\n                    rootNode.querySelectorAll('style').forEach(el => el.remove());\n                }\n\n                // Process scripts (security check and re-creation)\n                const scripts = [];\n                if (settings.executeScripts) {\n                    rootNode.querySelectorAll('script').forEach(oldScript => {\n                        const newScript = document.createElement('script');\n                        Array.from(oldScript.attributes).forEach(attr =>\n                            newScript.setAttribute(attr.name, attr.value)\n                        );\n                        newScript.textContent = oldScript.textContent;\n                        scripts.push(newScript);\n                        oldScript.remove();\n                    });\n                } else {\n                    rootNode.querySelectorAll('script').forEach(el => el.remove());\n                }\n\n                // Inject Light DOM slots if needed\n                if (!settings.shadow) {\n                    // Instead of replacing the slot entirely, we replace it with a persistent container\n                    // This allows us to append new nodes to it later via the MutationObserver\n                    rootNode.querySelectorAll('slot').forEach(slotEl => {\n                        const name = slotEl.getAttribute('name') || 'default';\n\n                        // Create a transparent wrapper acting as the slot\n                        const anchor = document.createElement('div');\n                        anchor.style.display = 'contents';\n                        anchor.setAttribute('data-acl-slot', name);\n\n                        // Insert pre-captured nodes (initial render)\n                        const nodesToInsert = lightSlots ? lightSlots[name] : null;\n                        if (nodesToInsert && nodesToInsert.length > 0) {\n                            nodesToInsert.forEach(node => anchor.appendChild(node));\n                        }\n                        // Fallback content (if no nodes provided)\n                        else if (slotEl.childNodes.length > 0) {\n                            while (slotEl.firstChild)\n                                anchor.appendChild(slotEl.firstChild);\n                        }\n\n                        // Replace the <slot> tag with our anchor\n                        slotEl.replaceWith(anchor);\n                    });\n                }\n\n                // Move nodes to component root\n                while (rootNode.firstChild) {\n                    const node = rootNode.firstChild;\n\n                    // Attach props directly to element\n                    if (node.nodeType === 1)\n                        node.$props = this.$props;\n\n                    // Append to root\n                    this._root.appendChild(node);\n                }\n\n                // Append scripts to trigger execution\n                scripts.forEach(s => this._root.appendChild(s));\n            }\n\n            // Forward specific events out of Shadow DOM\n            _setupEventForwarding() {\n                settings.forwardEvents.forEach(eventName => {\n                    this._root.addEventListener(eventName, (e) => {\n                        this.dispatchEvent(new CustomEvent(eventName, {\n                            bubbles: true,\n                            composed: true,\n                            detail: e.detail\n                        }));\n                    });\n                });\n            }\n\n            // Advanced Prop Validation and Type Casting\n            _updateProp(name, value) {\n                // Skip data-src, it's handled separately\n                if (name === 'data-src')\n                    return;\n\n                // Get config\n                const configDef = settings.attributes[name];\n\n                // Normalization: handle { type: String } vs just String\n                const type = (configDef && configDef.type) ? configDef.type : configDef,\n                    required = (configDef && configDef.required) === true,\n                    validator = (configDef && configDef.validator) ? configDef.validator : null,\n                    defaultValue = (configDef && configDef.hasOwnProperty('default')) ? configDef.default : undefined;\n\n                // Handle Missing / Null Attributes\n                if (value === null || value === undefined) {\n                    if (defaultValue !== undefined) {\n                        this.$props[name] = defaultValue;\n                        return;\n                    }\n                    if (required)\n                        console.warn(`[AlpineComponentLoader] Missing required prop \"${name}\" on <${tagName}>`);\n\n                    this._applyTypeDefault(name, type);\n                    return;\n                }\n\n                // Type Casting\n                let parsedValue;\n                if (type === Boolean) {\n                    parsedValue = (value !== null && value !== 'false');\n                } else if (type === Number) {\n                    const num = Number(value);\n                    parsedValue = isNaN(num) ? 0 : num;\n                } else if (type === Object || type === Array) {\n                    try {\n                        if (!value) parsedValue = (type === Array) ? [] : {};\n                        else parsedValue = JSON.parse(value.replace(/'/g, '\"'));\n                    } catch (e) {\n                        console.warn(`[AlpineComponentLoader] Attribute \"${name}\" is invalid JSON:`, value);\n                        parsedValue = (type === Array) ? [] : {};\n                    }\n                } else {\n                    parsedValue = value;\n                }\n\n                // Validation: Custom Validator\n                if (validator && typeof validator === 'function') {\n                    if (!validator(parsedValue)) {\n                        console.warn(`[AlpineComponentLoader] Validation failed for prop \"${name}\" on <${tagName}>. Value:`, parsedValue);\n                        // If we have a default, use it\n                        if (defaultValue !== undefined)\n                            this.$props[name] = defaultValue;\n                        // If prop is currently undefined (initial load), set a safe type default\n                        else if (this.$props[name] === undefined)\n                            this._applyTypeDefault(name, type);\n                        // If prop already had a value (update), do nothing (keep old valid value)\n                        return;\n                    }\n                }\n\n                this.$props[name] = parsedValue;\n            }\n\n            // Helper for type safety\n            _applyTypeDefault(name, type) {\n                if (type === Number)\n                    this.$props[name] = 0;\n                else if (type === Boolean)\n                    this.$props[name] = false;\n                else if (type === Array)\n                    this.$props[name] = [];\n                else if (type === Object)\n                    this.$props[name] = {};\n                else this.$props[name] = '';\n            }\n\n            // Reactively update props when attributes change\n            _syncAllAttributes() {\n                observedAttrs.forEach(name => this._updateProp(name, this.getAttribute(name)));\n            }\n\n            // Initialize persistence strategy with helpers\n            _initPersistence() {\n                const mode = this.getAttribute('persist') || settings.persist;\n                if (!mode)\n                    return;\n\n                // Choose storage (default to sessionStorage if not specified), generate key, and debounce config\n                const storage = (mode === 'local') ? localStorage : sessionStorage,\n                    key = this.getAttribute('persist-key') || settings.persistKey ||\n                        `acl:${this.localName}:${this.id ? ':' + this.id : 'no-id'}`,\n                    debounceMs = parseInt(this.getAttribute('persist-debounce') || settings.persistDebounce || '250', 10);\n\n                // Debounce timer for persistence\n                let _timer = null;\n\n                // Create a clean snapshot\n                const getSnapshot = () => Object.fromEntries(\n                    Object.entries(this.$props)\n                        .filter(([k, v]) => !k.startsWith('$') && typeof v !== 'function')\n                );\n\n                // Perform immediate save\n                const saveNow = (value) => {\n                    if (_timer)\n                        clearTimeout(_timer);\n                    _timer = null;\n                    storage.setItem(key, JSON.stringify(value || getSnapshot()));\n                };\n\n                // Attach persistence helpers\n                this.$props.$persistence = {\n                    $key: key,\n                    $save: (value) => {\n                        if (debounceMs > 0) {\n                            if (_timer)\n                                clearTimeout(_timer);\n                            _timer = setTimeout(() => saveNow(value), debounceMs);\n                        } else {\n                            saveNow(value);\n                        }\n                    },\n                    $clear: () => {\n                        if (_timer)\n                            clearTimeout(_timer);\n                        _timer = null;\n                        storage.removeItem(key);\n                    },\n                    $get: (k = null, fallback = null) => {\n                        try {\n                            let stored = JSON.parse(storage.getItem(key));\n                            return (k ? stored[k] : stored) || fallback;\n                        } catch (e) {\n                            return fallback;\n                        }\n                    },\n                    $flush: () => {\n                        if (_timer)\n                            saveNow();\n                    }\n                };\n\n                // Restore state on load\n                try {\n                    const stored = this.$props.$persistence.$get();\n                    if (stored && typeof stored === 'object')\n                        for (const k in this.$props)\n                            if (Object.prototype.hasOwnProperty.call(stored, k))\n                                this.$props[k] = stored[k];\n                } catch (e) {\n                    console.warn(`[AlpineComponentLoader] Restore failed for ${key}`, e);\n                }\n\n                // Start saving on Alpine updates\n                Alpine.effect(() => this.$props.$persistence.$save(getSnapshot()));\n\n                // Flush on page unload to prevent data loss\n                if (debounceMs > 0)\n                    window.addEventListener('beforeunload', () => this.$props.$persistence.$flush());\n            }\n\n            // Wait for Alpine.js to load\n            async _initAlpine() {\n                if (window.Alpine)\n                    return this._finishAlpineInit();\n\n                // Bind to alpine:init event + timeout if it is not fired\n                return new Promise((resolve, reject) => {\n                    document.addEventListener('alpine:init', () => {\n                        this._finishAlpineInit();\n                        resolve();\n                    }, { once: true });\n\n                    // Timeout\n                    setTimeout(() => {\n                        if (window.Alpine) {\n                            this._finishAlpineInit();\n                            resolve();\n                        }\n                        else\n                            reject(new Error(\"Alpine.js not found (Timeout)\"));\n                    }, 5000);\n                });\n            }\n\n            // Bridge props to Alpine store and init tree once Alpine is ready\n            _finishAlpineInit() {\n                // Bind Alpine store if provided\n                const storeName = this.getAttribute('bind-store') || settings.bindStore;\n                if (storeName) {\n                    let store = Alpine.store(storeName);\n                    if (store) {\n                        // Merge Alpine store with provided $props\n                        if (this.$props && typeof this.$props === 'object')\n                            Object.keys(this.$props)\n                                .filter(key => store[key] === undefined)\n                                .forEach(key => store[key] = this.$props[key]);\n\n                        // Set $props to Alpine store\n                        this.$props = store;\n                    } else {\n                        console.error(`[AlpineComponentLoader] Store \"${storeName}\" not found. Falling back to local state.`);\n                        this.$props = window.Alpine.reactive(this.$props || {});\n                    }\n                } else {\n                    // Initialize Alpine Store\n                    this.$props = window.Alpine.reactive(this.$props || {});\n                }\n\n                // Initialize persistence\n                this._initPersistence();\n\n                // Set an anonymous Alpine store for debugging\n                Alpine.store(`props_${tagName}_${Math.random().toString(36).slice(2)}`, this.$props);\n\n                // Pass the reactive reference to all children\n                // Any change to this.$props by children will now update the Store directly (and vice versa)\n                if (this._root && this._root.children)\n                    Array.from(this._root.children).forEach(node => {\n                        if (node.nodeType === 1)\n                            node.$props = this.$props;\n                    });\n\n                // We wrap in nextTick to ensure the DOM is settled before Alpine scans it\n                window.Alpine.nextTick(() => {\n                    if (this._root)\n                        window.Alpine.initTree(this._root);\n                });\n            }\n\n            // Render error message safely\n            _renderError(msg) {\n                const container = document.createElement('div');\n                container.style.cssText = toCssString(settings.errorCss);\n\n                const header = document.createElement('strong');\n                header.textContent = `Load Failed: <${tagName}>`;\n\n                const code = document.createElement('code');\n                code.textContent = msg;\n                code.style.display = 'block';\n                code.style.marginTop = '4px';\n                container.appendChild(header);\n                container.appendChild(code);\n\n                if (settings.shadow)\n                    this._root.replaceChildren(container);\n                else\n                    this._root.appendChild(container);\n            }\n\n            // Dispatch custom event\n            _dispatch(eventName) {\n                this.dispatchEvent(new CustomEvent(eventName, {\n                    bubbles: true,\n                    composed: true,\n                    detail: { props: this.$props }\n                }));\n            }\n\n            // Resolve URL string, ID selector, or Template object\n            _resolveContent(source) {\n                return (async () => {\n                    // Handle HTMLTemplateElement or ID Selector (Sync/Fast)\n                    if (source instanceof HTMLTemplateElement) {\n                        return source.content;\n                    } else if (typeof source === 'string' && source.startsWith('#')) {\n                        const el = document.querySelector(source);\n                        if (!el)\n                            return Promise.reject(new Error(`Template ID \"${source}\" not found`));\n                        if (!(el instanceof HTMLTemplateElement))\n                            return Promise.reject(new Error(`ID \"${source}\" is not a <template>`));\n                        return el.content;\n                    }\n\n                    // Check Cache API\n                    const useCache = settings.cacheTemplates && 'caches' in window,\n                        faH = 'acl__fetched-at__'; // XXX: Make this configurable?\n\n                    // Cache API\n                    let _cache;\n                    if (useCache) {\n                        try {\n                            // Open cache\n                            _cache = await caches.open(settings._templateCacheKey);\n\n                            // Read from cache + check expiration\n                            const match = await _cache.match(source);\n                            if (match?.ok) {\n                                const fetchedAt = Number(match.headers.get(faH));\n                                if (!Number.isNaN(fetchedAt) && (Date.now() - fetchedAt) < settings._templateCacheExpire)\n                                    return match.text();\n                                await _cache.delete(settings._templateCacheKey);\n                            }\n                        } catch { /* Ignore cache read errors */ }\n                    }\n\n                    // Network Fetch\n                    const res = await fetch(source, { cache: 'no-store' });\n                    if (!res.ok)\n                        throw new Error(`HTTP ${res.status}`);\n\n                    // Write to Cache API\n                    if (useCache) {\n                        try {\n                            // Clone response + headers\n                            const clone = res.clone(),\n                                headers = new Headers(clone.headers);\n\n                            // Set cache expiration header\n                            headers.set(faH, Date.now().toString());\n\n                            // Write to cache\n                            await _cache.put(\n                                source,\n                                new Response(clone.body, {\n                                    status: clone.status,\n                                    statusText: clone.statusText,\n                                    headers\n                                })\n                            );\n                        } catch { /* Ignore cache write errors */ }\n                    }\n\n                    // Return HTML string\n                    return res.text();\n                })();\n            }\n\n            // Helpers to deal with template caches within the component\n            // TODO: Implement as a an available Alpine directive/$props function\n            async _pruneCache() { return await AlpineComponentLoader.pruneCache(settings._templateCachePrefix, settings._templateCacheKey); }\n            async _clearCache() { return await AlpineComponentLoader.clearCache(settings._templateCacheKey); }\n        }\n\n        // Register custom element\n        customElements.define(tagName, AlpineExternalComponent);\n    }\n}\n\n// Declarative component proxy, replaces itself with the loaded component\nclass AlpineDeclarativeLoader extends HTMLElement {\n    async connectedCallback() {\n        const src = this.getAttribute('src') || this.getAttribute('url');\n        if (!src) {\n            console.error(`<${this.localName}>: missing \"src\" attribute`);\n            return;\n        }\n\n        // Determine Tag Name (Attribute > Filename)\n        let tagName = this.getAttribute('tag');\n        if (!tagName)\n            tagName = (src.split('/').pop()).split('.').shift(); // Strip extension\n\n        // Validate tag name; ensure it contains a hyphen\n        if (!tagName.includes('-')) {\n            console.error(`<${this.localName}>: Tag name \"${tagName}\" must contain a hyphen.`);\n            return;\n        }\n\n        // Parse Config from Attributes\n        const config = {\n            shadow: this.hasAttribute('shadow') ? (this.getAttribute('shadow') !== 'false') : AlpineComponentLoader.globalConfig.shadow,\n            loading: this.getAttribute('loading') || 'eager',\n            dataSrc: this.getAttribute('data-src') || null,\n            bindStore: this.getAttribute('bind-store') || null,\n            fallback: this.getAttribute('fallback') || null,\n            attributes: {} // Auto-inference of props\n        };\n\n        // Define the component (if not already defined)\n        if (!customElements.get(tagName)) {\n            // Heuristic: Check other attributes to guess Prop Types\n            for (const attr of this.attributes) {\n                if ([\n                    'src', 'url', 'tag', 'shadow', 'loading', 'class',\n                    'style', 'id', 'data-src', 'bind-store', 'fallback'\n                ].includes(attr.name))\n                    continue;\n\n                // If value looks like JSON Array/Object, treat as such\n                const val = attr.value.trim();\n\n                // Try to infer type\n                let inferredType = String;\n                if (val.startsWith('[') || val.startsWith('{')) inferredType = (val.startsWith('[')) ? Array : Object;\n                else if (val === 'true' || val === 'false' || val === '') inferredType = Boolean;\n                else if (!isNaN(Number(val))) inferredType = Number;\n\n                // Add to config\n                config.attributes[attr.name] = inferredType;\n            }\n\n            // Define the component\n            AlpineComponentLoader.define(tagName, src, config);\n        }\n\n        // Create the REAL element\n        const realElement = document.createElement(tagName);\n\n        // Forward Attributes (Props, Classes, IDs)\n        for (const attr of this.attributes) {\n            if (['src', 'url', 'tag', 'shadow'].includes(attr.name))\n                continue; // Don't forward loader-specific config\n            realElement.setAttribute(attr.name, attr.value);\n        }\n\n        // Move any children (slots) to the REAL element\n        while (this.firstChild)\n            realElement.appendChild(this.firstChild);\n\n        // Swap in the DOM\n        this.replaceWith(realElement);\n    }\n}\n\n// Dynamic component switcher\nclass AlpineDynamicLoader extends HTMLElement {\n    static get observedAttributes() {\n        return ['is'];\n    }\n\n    constructor() {\n        super();\n        this._cache = new Map();\n    }\n\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (name === 'is' && newVal && newVal !== oldVal)\n            this._switch(newVal);\n    }\n\n    connectedCallback() {\n        this.setAttribute('data-acl-component', 'acl-dynamic');\n        if (!this.firstElementChild && this.getAttribute('is'))\n            this._switch(this.getAttribute('is'));\n    }\n\n    disconnectedCallback() {\n        // Cleanup cache to prevent memory leaks when loader is removed\n        this._cache.forEach(el => {\n            if (el._root && window.Alpine)\n                window.Alpine.destroyTree(el._root);\n        });\n        this._cache.clear();\n    }\n\n    _switch(tag) {\n        if (!tag)\n            return;\n        tag = tag.toLowerCase();\n\n        const keepAlive = this.hasAttribute('keep-alive'),\n            current = this.firstElementChild;\n\n        // Cache the current component if keep-alive is active\n        if (current && keepAlive) {\n            // Save scroll position before detaching\n            current._savedScroll = current.scrollTop;\n\n            // Mark as kept alive so disconnectedCallback doesn't destroy it\n            current._isKeptAlive = true;\n            this._cache.set(current.tagName.toLowerCase(), current);\n\n            // Detach\n            current.remove();\n\n            // Reset flag for future legitimate removals\n            current._isKeptAlive = false;\n        } else {\n            // Standard tear down\n            this.replaceChildren();\n            // If we turned off keep-alive, ensure we don't hold onto old refs\n            if (current && !keepAlive)\n                this._cache.delete(current.tagName.toLowerCase());\n        }\n\n        // Restore or Create new component\n        if (keepAlive && this._cache.has(tag)) {\n            const el = this._cache.get(tag);\n            this.appendChild(el);\n\n            // Restore scroll position\n            if (el._savedScroll)\n                el.scrollTop = el._savedScroll;\n        } else {\n            try {\n                const el = document.createElement(tag);\n                // Forward attributes (excluding loader-specific ones)\n                Array.from(this.attributes).forEach(attr => {\n                    if (!['is', 'keep-alive'].includes(attr.name))\n                        el.setAttribute(attr.name, attr.value);\n                });\n                this.appendChild(el);\n            } catch (e) {\n                console.error(`[AlpineComponentLoader] Failed to create: <${tag}>`, e);\n            }\n        }\n    }\n}\n\n// Once DOM is ready, start loading components\ntry {\n    if (document.readyState === 'loading') {\n        window.addEventListener('DOMContentLoaded', AlpineComponentLoader.start, { once: true });\n    } else {\n        AlpineComponentLoader.start();\n    }\n} catch (e) {\n    console.warn(`[AlpineComponentLoader] Failed to register components:`, e);\n}"]}