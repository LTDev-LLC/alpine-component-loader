{"version":3,"sources":["../src/index.js"],"names":["styleSheetCache","Map","scriptLoadCache","typeMap","String","Number","Boolean","Array","Object","debuggerCss","tooltip","position","zIndex","background","color","padding","borderRadius","fontSize","fontFamily","pointerEvents","border","boxShadow","maxWidth","whiteSpace","display","overlay","top","left","width","height","overflow","overlayBoxes","boxSizing","transition","toCssString","styleObj","entries","map","k","v","replace","m","toLowerCase","join","AlpineComponentLoader","start","_started","pruneCaches","registerComponent","registerDynamicLoader","registerTemplates","prefix","current","globalConfig","_templateCachePrefix","_templateCacheKey","window","Promise","all","caches","keys","filter","key","startsWith","delete","clearCache","console","warn","config","options","assign","name","defaultComponentName","customElements","get","define","AlpineDeclarativeLoader","defaultDynamicName","AlpineDynamicLoader","document","querySelectorAll","forEach","tpl","tagName","getAttribute","attributes","fromEntries","JSON","parse","val","type","e","toggleDebug","active","debug","body","classList","toggle","getElementById","createElement","id","style","cssText","titleNode","hr","margin","borderBottom","statusNode","propsNode","append","_nodes","title","status","props","appendChild","overlayContainer","mouseX","mouseY","hoveredElement","onMouseMove","clientX","clientY","composedPath","find","node","nodeType","hasAttribute","addEventListener","passive","renderLoop","replaceChildren","removeEventListener","components","children","usedBoxCount","el","rect","getBoundingClientRect","nodes","shadowRoot","length","minX","Infinity","minY","maxX","maxY","found","child","cRect","Math","min","max","right","bottom","box","transform","i","textContent","_loading","stringify","$props","offset","tRect","winW","innerWidth","winH","innerHeight","requestAnimationFrame","source","settings","loading","hooks","beforeFetch","opts","afterFetch","data","externalCss","externalScripts","sharedStyleSheets","errorCss","flexDirection","gap","backgroundColor","forwardEvents","fallback","persist","persistKey","persistDebounce","bindStore","dataSrc","fetchTimeout","fetchOptions","observedAttrs","Set","contentSource","basePath","AlpineExternalComponent","$emit","detail","dispatchEvent","CustomEvent","bubbles","composed","_initialized","_disconnectTimeout","_fetchAbortController","Alpine","reactive","$data","$loading","$error","error","_root","shadow","attachShadow","mode","_observer","_scopeId","random","toString","slice","_slotObserver","attributeChangedCallback","oldVal","newVal","_fetchData","_updateProp","_triggerHook","connectedCallback","setAttribute","clearTimeout","_syncAllAttributes","loadMode","_initLazyObserver","_initIdleLoader","_load","disconnectedCallback","disconnect","_isKeptAlive","setTimeout","isConnected","abort","destroyTree","placeholder","minHeight","IntersectionObserver","isIntersecting","rootMargin","observe","requestIdleCallback","timeout","_initSlotObserver","MutationObserver","mutations","mutation","addedNodes","Node","ELEMENT_NODE","TEXT_NODE","slotName","container","querySelector","childList","promises","content","lightSlots","err","fallbackSource","fallbackErr","_loadExternalDependencies","resolve","_resolveContent","_captureLightSlots","url","link","rel","href","_renderSafe","_setupEventForwarding","_initAlpine","_dispatch","_renderError","message","signal","timeoutId","modifiedOptions","res","contentType","json","modified","AbortController","method","headers","fetch","ok","Error","statusText","includes","aborted","reason","hookName","call","root","head","has","p","reject","script","src","async","onload","onerror","set","push","slots","default","from","childNodes","rootNode","styles","combinedCss","sheet","scripts","DOMParser","parseFromString","cloneNode","stripStyles","useConstructibleStyles","adoptedStyleSheets","s","trim","CSSStyleSheet","replaceSync","remove","executeScripts","oldScript","newScript","attr","value","slotEl","anchor","nodesToInsert","firstChild","replaceWith","eventName","configDef","required","validator","defaultValue","hasOwnProperty","undefined","_applyTypeDefault","parsedValue","num","isNaN","_initPersistence","storage","localStorage","sessionStorage","localName","debounceMs","parseInt","_timer","getSnapshot","saveNow","setItem","$persistence","$key","$save","$clear","removeItem","$get","stored","getItem","$flush","prototype","effect","_finishAlpineInit","once","storeName","store","nextTick","initTree","msg","header","code","marginTop","useCache","faH","_cache","match","fetchedAt","clone","HTMLTemplateElement","cacheTemplates","open","Date","now","_templateCacheExpire","text","cache","Headers","put","Response","_pruneCache","pruneCache","_clearCache","observedAttributes","HTMLElement","_templateCacheVersion","inferredType","realElement","split","pop","shift","_switch","firstElementChild","clear","tag","keepAlive","_savedScroll","scrollTop","readyState"],"mappings":"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","file":"AlpineComponentLoader.js","sourcesContent":["/**\n * @license AlpineComponentLoader\n *\n * Copyright (c) LTDev LLC\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Cache for constructible stylesheets (Internal styles only)\nconst styleSheetCache = new Map();\n\n// Cache for External Script loading states (Prevent duplicate execution)\nconst scriptLoadCache = new Map();\n\n// Type map for prop attribute definitions\nconst typeMap = {\n    'String': String,\n    'Number': Number,\n    'Boolean': Boolean,\n    'Array': Array,\n    'Object': Object\n};\n\n// CSS for debugger\nconst debuggerCss = {\n    tooltip: {\n        position: 'fixed',\n        zIndex: 10000,\n        background: '#1f2937',\n        color: '#f3f4f6',\n        padding: '8px 12px',\n        borderRadius: '6px',\n        fontSize: '11px',\n        fontFamily: 'monospace',\n        pointerEvents: 'none',\n        border: '1px solid #374151',\n        boxShadow: '0 4px 6px -1px rgba(0,0,0,0.1)',\n        maxWidth: '300px',\n        whiteSpace: 'pre-wrap',\n        display: 'none',\n    },\n    overlay: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        pointerEvents: 'none',\n        zIndex: 9998,\n        overflow: 'hidden'\n    },\n    overlayBoxes: {\n        position: 'absolute',\n        border: '3px solid #22c55e',\n        boxSizing: 'border-box',\n        transition: 'all 0.1s ease-out'\n    }\n};\n\n// Helper to convert JS style objects to CSS strings\nconst toCssString = (styleObj) => {\n    return Object.entries(styleObj)\n        .map(([k, v]) => `${k.replace(/[A-Z]/g, m => `-${m.toLowerCase()}`)}:${v}`)\n        .join(';');\n};\n\nexport default class AlpineComponentLoader {\n    static _started = false;\n\n    // Global default configuration\n    static globalConfig = {\n        debug: false,\n        basePath: '',\n        errorCss: {},\n        shadow: false,\n        useConstructibleStyles: true,\n        sharedStyleSheets: [],\n        executeScripts: true,\n        stripStyles: false,\n        forwardEvents: [],\n        externalCss: [],\n        externalScripts: [],\n        defaultComponentName: 'acl-component',\n        defaultDynamicName: 'acl-dynamic',\n\n        // Template caching\n        cacheTemplates: true,\n        _templateCacheVersion: '0.0.1',\n        _templateCachePrefix: 'alpine-component-loader-',\n        _templateCacheKey: `alpine-component-loader-0.0.1`,\n        _templateCacheExpire: 15 * 60 * 1000, // 15 minutes\n    };\n\n    // Start loading components + setup component proxy\n    static async start() {\n        if (AlpineComponentLoader._started)\n            return;\n        AlpineComponentLoader._started = true;\n\n        // Cleanup old caches\n        await AlpineComponentLoader.pruneCaches();\n\n        // Register default components\n        AlpineComponentLoader.registerComponent();\n        AlpineComponentLoader.registerDynamicLoader();\n        AlpineComponentLoader.registerTemplates();\n    }\n\n    // Clear caches from unmatched versions\n    static async pruneCaches(prefix = AlpineComponentLoader.globalConfig._templateCachePrefix, current = AlpineComponentLoader.globalConfig._templateCacheKey) {\n        if (!('caches' in window))\n            return;\n        return await Promise.all((await caches.keys())\n            .filter(key => key.startsWith(prefix))\n            .filter(key => key !== current)\n            .map(key => caches.delete(key)));\n    }\n\n    // Manually clear all template caches\n    static async clearCache(current = AlpineComponentLoader.globalConfig._templateCacheKey) {\n        if (!('caches' in window)) {\n            console.warn('[AlpineComponentLoader] Cache API not supported.');\n            return;\n        }\n\n        // Clear all caches with the specified prefix\n        return await Promise.all((await caches.keys())\n            .filter(key => key.startsWith(current))\n            .map(key => caches.delete(key)));\n    }\n\n    // Update global configuration\n    static config(options) {\n        Object.assign(AlpineComponentLoader.globalConfig, options);\n    }\n\n    // Register default custom component\n    static registerComponent(name = AlpineComponentLoader.globalConfig.defaultComponentName) {\n        if (!customElements.get(name))\n            customElements.define(name, AlpineDeclarativeLoader);\n    }\n\n    // Register default dynamic loader\n    static registerDynamicLoader(name = AlpineComponentLoader.globalConfig.defaultDynamicName) {\n        if (!customElements.get(name))\n            customElements.define(name, AlpineDynamicLoader);\n    }\n\n    // Auto-discover <template acl-component=\"name\"> elements\n    static registerTemplates() {\n        document.querySelectorAll('template[acl-component]').forEach(tpl => {\n            const tagName = tpl.getAttribute('acl-component');\n            if (!tagName)\n                return;\n\n            // Parse acl-props attribute as JSON\n            let config;\n            try {\n                config = {\n                    attributes: Object.fromEntries(Object.entries(JSON.parse(tpl.getAttribute('acl-props') || '{}')).map(([key, val]) => [\n                        key,\n                        (typeof val === 'object' && val.type) ? {\n                            ...val,\n                            type: typeMap[val.type] || String\n                        } : (typeMap[val] || String)\n                    ]))\n                }\n            } catch (e) {\n                console.warn(`[AlpineComponentLoader] Invalid JSON in acl-props for <${tagName}>`, e);\n            }\n\n            // Define the component\n            AlpineComponentLoader.define(tagName, tpl, config || {});\n        });\n    }\n\n    // Toggle the built-in debugger\n    static toggleDebug() {\n        const active = (this.globalConfig.debug = !this.globalConfig.debug);\n        document.body.classList.toggle('acl-debug-active', active);\n\n        // Create the tooltip element if it doesn't exist\n        let tooltip = document.getElementById('acl-debug-tooltip');\n        if (!tooltip) {\n            tooltip = document.createElement('div');\n            tooltip.id = 'acl-debug-tooltip';\n            tooltip.style.cssText = toCssString(debuggerCss.tooltip);\n\n            // Title\n            const titleNode = document.createElement('strong');\n            titleNode.style.color = '#4ade80';\n\n            // Title separator\n            const hr = document.createElement('div');\n            hr.style.margin = '4px 0';\n            hr.style.borderBottom = '1px solid #374151';\n\n            // Status info\n            const statusNode = document.createElement('div');\n\n            // Prop info\n            const propsNode = document.createElement('pre');\n            propsNode.style.cssText = 'margin: 4px 0 0 0; opacity: 0.8;';\n\n            // Append once\n            tooltip.append(titleNode, hr, statusNode, propsNode);\n\n            // Save references for fast updates\n            tooltip._nodes = { title: titleNode, status: statusNode, props: propsNode };\n\n            // Append to body\n            document.body.appendChild(tooltip);\n        }\n\n        // Create the overlay container if it doesn't exist\n        let overlayContainer = document.getElementById('acl-debug-overlays');\n        if (!overlayContainer) {\n            overlayContainer = document.createElement('div');\n            overlayContainer.id = 'acl-debug-overlays';\n            overlayContainer.style.cssText = toCssString(debuggerCss.overlay);\n            document.body.appendChild(overlayContainer);\n        }\n\n        // State management, tracking hovered component + mouse position\n        let mouseX = 0,\n            mouseY = 0,\n            hoveredElement = null;\n\n        // Lightweight mouse listener for finding hovered component + mouse position\n        const onMouseMove = (e) => {\n            mouseX = e.clientX;\n            mouseY = e.clientY;\n\n            // Find hovered component (handling Shadow DOM)\n            hoveredElement = (e.composedPath() || []).find(node => node.nodeType === 1 && node.hasAttribute('data-acl-component'));\n        };\n\n        // If active, start debugging!\n        if (active) {\n            document.addEventListener('mousemove', onMouseMove, { passive: true });\n\n            // Render loop, with throttling, handles overlay + tooltip\n            const renderLoop = () => {\n                if (!AlpineComponentLoader.globalConfig.debug) {\n                    overlayContainer.replaceChildren(); // Cleanup\n                    tooltip.style.display = 'none';\n                    document.removeEventListener('mousemove', onMouseMove);\n                    return;\n                }\n\n                // Overlay logic (DOM Pooling) for component positions\n                const components = document.querySelectorAll('[data-acl-component]'),\n                    children = overlayContainer.children;\n                let usedBoxCount = 0;\n\n                // Measure all components recursively to find visible areas\n                components.forEach((el) => {\n                    let rect = el.getBoundingClientRect();\n\n                    // Attempt to find visible area of children for collapsed elements\n                    if (rect.width === 0 && rect.height === 0) {\n                        const nodes = el.shadowRoot ? el.shadowRoot.children : el.children;\n                        if (nodes.length > 0) {\n                            let minX = Infinity,\n                                minY = Infinity,\n                                maxX = -Infinity,\n                                maxY = -Infinity,\n                                found = false;\n\n                            // Measure children recursively until we find a valid visible area\n                            for (const child of nodes) {\n                                const cRect = child.getBoundingClientRect();\n                                if (cRect.width > 0 || cRect.height > 0) {\n                                    found = true;\n                                    minX = Math.min(minX, cRect.left);\n                                    minY = Math.min(minY, cRect.top);\n                                    maxX = Math.max(maxX, cRect.right);\n                                    maxY = Math.max(maxY, cRect.bottom);\n                                }\n                            }\n\n                            // Found a valid visible area, use it\n                            if (found)\n                                rect = {\n                                    left: minX,\n                                    top: minY,\n                                    width: maxX - minX,\n                                    height: maxY - minY\n                                };\n                        }\n                    }\n\n                    // Only draw if we have a valid visible area\n                    if (rect.width > 0 && rect.height > 0) {\n                        // Reuse existing box or create new one\n                        let box = children[usedBoxCount];\n                        if (!box) {\n                            box = document.createElement('div');\n                            box.style.cssText = toCssString(debuggerCss.overlayBoxes);\n                            overlayContainer.appendChild(box);\n                        }\n\n                        // Fast style update\n                        box.style.transform = `translate(${rect.left}px, ${rect.top}px)`;\n                        box.style.width = `${rect.width}px`;\n                        box.style.height = `${rect.height}px`;\n                        box.style.display = 'block'; // Ensure it's visible\n\n                        // Count the used boxes\n                        usedBoxCount++;\n                    }\n                });\n\n                // Hide unused boxes in the pool\n                for (let i = usedBoxCount; i < children.length; i++)\n                    children[i].style.display = 'none';\n\n                // Tooltip logic, apply position + content\n                if (hoveredElement) {\n                    tooltip.style.display = 'block';\n\n                    // Content Update\n                    tooltip._nodes.title.textContent = `<${hoveredElement.getAttribute('data-acl-component')}>`;\n                    tooltip._nodes.status.textContent = hoveredElement._loading ? 'Loading...' : 'Ready';\n                    tooltip._nodes.status.style.color = hoveredElement._loading ? '#fbbf24' : '#4ade80';\n\n                    // Display all props\n                    tooltip._nodes.props.textContent = JSON.stringify(hoveredElement.$props, null, 2);\n\n                    // Base position information\n                    const offset = 15,\n                        tRect = tooltip.getBoundingClientRect(),\n                        winW = window.innerWidth,\n                        winH = window.innerHeight;\n\n                    // Initial positioning\n                    let left = mouseX + offset,\n                        top = mouseY + offset;\n\n                    // Keep tooltip on screen within offset\n                    if (left + tRect.width > winW)\n                        left = mouseX - tRect.width - offset;\n                    if (top + tRect.height > winH)\n                        top = mouseY - tRect.height - offset;\n                    if (left < 0)\n                        left = offset;\n                    if (top < 0)\n                        top = offset;\n\n                    // Update position\n                    tooltip.style.left = `${left}px`;\n                    tooltip.style.top = `${top}px`;\n                } else {\n                    tooltip.style.display = 'none';\n                }\n                requestAnimationFrame(renderLoop);\n            };\n            requestAnimationFrame(renderLoop);\n        }\n    }\n\n    // Define a new component from a URL, ID, or Template element\n    static define(tagName, source, config = {}) {\n        // Merge defaults, global config, and instance config\n        const settings = {\n            attributes: {},\n            loading: 'eager',\n            hooks: {\n                beforeFetch: (opts) => opts,\n                afterFetch: (data) => data,\n            },\n            ...AlpineComponentLoader.globalConfig,\n            ...config,\n            externalCss: [\n                ...(AlpineComponentLoader.globalConfig.externalCss || []),\n                ...(config.externalCss || [])\n            ],\n            externalScripts: [\n                ...(AlpineComponentLoader.globalConfig.externalScripts || []),\n                ...(config.externalScripts || [])\n            ],\n            sharedStyleSheets: [\n                ...(AlpineComponentLoader.globalConfig.sharedStyleSheets || []),\n                ...(config.sharedStyleSheets || [])\n            ],\n            errorCss: {\n                ...{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    gap: '0.5rem',\n                    padding: '1rem',\n                    border: '1px solid #fca5a5',\n                    backgroundColor: '#fee2e2',\n                    color: '#991b1b',\n                    borderRadius: '6px',\n                    fontFamily: 'sans-serif',\n                    fontSize: '0.9rem'\n                },\n                ...(AlpineComponentLoader.globalConfig.errorCss || {}),\n                ...(config.errorCss || {})\n            },\n            forwardEvents: [\n                ...(AlpineComponentLoader.globalConfig.forwardEvents || []),\n                ...(config.forwardEvents || [])\n            ],\n            fallback: config.fallback || null,\n            persist: config.persist || false,\n            persistKey: config.persistKey || null,\n            persistDebounce: config.persistDebounce || 250,\n            bindStore: config.bindStore || null,\n            dataSrc: config.dataSrc || null,\n            fetchTimeout: config.fetchTimeout || 30000,\n            fetchOptions: config.fetchOptions || {},\n        };\n\n        // Track observed attributes internally\n        const observedAttrs = [\n            ...new Set([\n                ...Object.keys(settings.attributes),\n                'bind-store',\n                'data-src',\n            ]),\n        ];\n\n        // Prepend base path if source is a URL string\n        let contentSource = source;\n        if (typeof source === 'string' && !source.startsWith('#') && settings.basePath)\n            contentSource = settings.basePath + source;\n\n        // Create component class\n        class AlpineExternalComponent extends HTMLElement {\n            constructor() {\n                super();\n\n                // Helper to emit events via $el.$props.$emit\n                const $emit = (name, detail) => {\n                    this.dispatchEvent(new CustomEvent(name, {\n                        bubbles: true,\n                        composed: true,\n                        detail\n                    }));\n                };\n\n                // Initialize state and attributes\n                this._initialized = false;\n                this._loading = false;\n                this._disconnectTimeout = null;\n                this._fetchAbortController = null;\n                this.$props = window.Alpine ? window.Alpine.reactive({\n                    $data: null,\n                    $loading: false,\n                    $error: null,\n                    $emit,\n                    ...settings.attributes || {}\n                }) : {\n                    data: null,\n                    loading: false,\n                    error: null,\n                    $emit,\n                };\n                this._root = settings.shadow ? this.attachShadow({ mode: 'open' }) : this;\n                this._observer = null;\n                this._scopeId = `scope-${Math.random().toString(36).slice(2, 9)}`;\n                this._slotObserver = null; // Initialize observer reference\n            }\n\n            // Define observed attributes\n            static get observedAttributes() {\n                return observedAttrs;\n            }\n\n            // Reactively update props when attributes change\n            attributeChangedCallback(name, oldVal, newVal) {\n                if (oldVal === newVal)\n                    return;\n\n                // Update prop and validate\n                if (name === 'data-src') {\n                    if (this._initialized)\n                        this._fetchData(newVal);\n                } else {\n                    this._updateProp(name, newVal);\n                }\n\n                // Lifecycle: Updated\n                if (this._initialized)\n                    this._triggerHook('updated', { name, oldVal, newVal });\n            }\n\n            // Initialize on insertion\n            connectedCallback() {\n                this.setAttribute('data-acl-component', this.tagName);\n\n                // If we are just moving nodes, the disconnect timer is still running\n                // We clear it so the component stays alive\n                if (this._disconnectTimeout) {\n                    clearTimeout(this._disconnectTimeout);\n                    this._disconnectTimeout = null;\n                    return; // It was just a move, do nothing.\n                }\n\n                // If kept-alive and already initialized, just reactivate\n                if (this._initialized) {\n                    this._triggerHook('activated');\n                    return;\n                }\n\n                // Guard against parallel loading or already initialized states\n                if (this._loading)\n                    return;\n\n                // Lock loading state\n                this._loading = true;\n\n                // Sync attributes immediately for eager loading\n                this._syncAllAttributes();\n\n                // Check loading mode and load\n                const loadMode = this.getAttribute('loading') || settings.loading;\n                if (loadMode === 'lazy')\n                    this._initLazyObserver();\n                else if (loadMode === 'idle')\n                    this._initIdleLoader();\n                else\n                    this._load();\n            }\n\n            // Cleanup memory on removal\n            disconnectedCallback() {\n                // Stop observing slots\n                if (this._slotObserver) {\n                    this._slotObserver.disconnect();\n                    this._slotObserver = null;\n                }\n\n                // If flagged with keep-alive, skip destruction\n                if (this._isKeptAlive || this.hasAttribute('keep-alive')) {\n                    this._triggerHook('deactivated');\n                    return;\n                }\n\n                // Don't destroy immediately; give moves/rewrites time to reattach\n                this._disconnectTimeout = setTimeout(() => {\n                    // If we got re-attached after a slower move, abort cleanup\n                    if (this.isConnected) {\n                        this._disconnectTimeout = null;\n                        return;\n                    }\n\n                    // Lifecycle: Unmounted\n                    this._triggerHook('unmounted');\n\n                    // Cancel any pending fetches\n                    if (this._fetchAbortController)\n                        this._fetchAbortController.abort();\n                    if (this._observer)\n                        this._observer.disconnect();\n                    if (this._root && window.Alpine && this._initialized)\n                        window.Alpine.destroyTree(this._root);\n\n                    // Reset state so the component can revive if re-attached\n                    this._initialized = false;\n                    this._loading = false;\n                    this._disconnectTimeout = null;\n                }, 250);\n            }\n\n            // intersectionObserver for lazy loading\n            _initLazyObserver() {\n                const placeholder = document.createElement('div');\n                placeholder.style.minHeight = '1px';\n                this._root.appendChild(placeholder);\n                this._observer = new IntersectionObserver((entries) => {\n                    if (entries[0].isIntersecting) {\n                        this._load();\n                        this._observer.disconnect();\n                        this._observer = null; // Kill the observer reference\n                    }\n                }, { rootMargin: '100px' });\n                this._observer.observe(this);\n            }\n\n            // Idle loading strategy\n            _initIdleLoader() {\n                if ('requestIdleCallback' in window) {\n                    requestIdleCallback(() => this._load(), { timeout: 2000 });\n                } else {\n                    setTimeout(() => this._load(), 200);\n                }\n            }\n\n            // Initialize MutationObserver for dynamic Light DOM slots\n            _initSlotObserver() {\n                if (this._slotObserver)\n                    return;\n\n                this._slotObserver = new MutationObserver((mutations) => mutations.forEach(mutation => {\n                    mutation.addedNodes.forEach(node => {\n                        // Only handle Elements and Text nodes\n                        if (node.nodeType !== Node.ELEMENT_NODE && node.nodeType !== Node.TEXT_NODE)\n                            return;\n\n                        // Ignore the slot containers themselves if they trigger an add\n                        if (node.nodeType === Node.ELEMENT_NODE && node.hasAttribute('data-acl-slot'))\n                            return;\n\n                        // Determine target slot name + find the internal slot container\n                        const slotName = (node.nodeType === Node.ELEMENT_NODE ? node.getAttribute('slot') : null) || 'default',\n                            container = this._root.querySelector(`div[data-acl-slot=\"${slotName}\"]`);\n\n                        // Move the node into the container\n                        if (container)\n                            container.appendChild(node);\n                    });\n                }));\n\n                // Only observe direct children additions\n                this._slotObserver.observe(this, { childList: true });\n            }\n\n            // Main load sequence\n            async _load() {\n                try {\n                    // Lock loading state\n                    if (this._initialized)\n                        return;\n\n                    // Lifecycle: Before Mount\n                    this._triggerHook('beforeMount');\n\n                    // Load external dependencies, get content, and data if needed\n                    const promises = [\n                        (settings.externalCss.length || settings.externalScripts.length) ? this._loadExternalDependencies() : Promise.resolve(),\n                        this._resolveContent(contentSource),\n                        (settings.dataSrc || this.getAttribute('data-src')) ? this._fetchData(this.getAttribute('data-src') || settings.dataSrc) : Promise.resolve(),\n                    ];\n\n                    // Get content from the resolved source\n                    const content = (await Promise.all(promises))[1];\n\n                    // Capture existing children for slotting if using Light DOM\n                    let lightSlots = null;\n                    if (!settings.shadow)\n                        lightSlots = this._captureLightSlots();\n\n                    // Strict clear of root element\n                    this._root.replaceChildren();\n\n                    // Inject CSS Links into Shadow (Apply Styles locally)\n                    if (settings.shadow && settings.externalCss.length) {\n                        settings.externalCss.forEach(url => {\n                            const link = document.createElement('link');\n                            link.rel = 'stylesheet';\n                            link.href = url;\n                            this._root.appendChild(link);\n                        });\n                    }\n\n                    // Render content safely\n                    await this._renderSafe(content, lightSlots);\n\n                    // Setup event bubbling for Shadow DOM\n                    if (settings.shadow && settings.forwardEvents.length > 0)\n                        this._setupEventForwarding();\n\n                    // Start observing Light DOM for dynamic updates\n                    if (!settings.shadow)\n                        this._initSlotObserver();\n\n                    // Initialize Alpine\n                    await this._initAlpine();\n\n                    // Mark success and unlock\n                    this._initialized = true;\n                    this._loading = false;\n\n                    // Lifecycle: Mounted\n                    this._dispatch('mount');\n                    this._triggerHook('mounted');\n\n                    //Dispatch 'loaded' event\n                    this._dispatch('loaded');\n                } catch (err) {\n                    console.error(`[AlpineComponentLoader] <${tagName}>`, err);\n                    this._loading = false; // Unlock on error so we can retry\n                    const fallbackSource = this.getAttribute('fallback') || settings.fallback;\n                    if (fallbackSource) {\n                        try {\n                            // Clear failed state\n                            this._root.replaceChildren();\n\n                            // Render fallback; pass null for slots as fallback usually doesn't slot user content\n                            await this._renderSafe(await this._resolveContent(fallbackSource), null);\n\n                            // Init Alpine (so fallback can be interactive)\n                            await this._initAlpine();\n\n                            // Mark success and unlock\n                            this._initialized = true;\n\n                            // Dispatch 'loaded' event\n                            this._dispatch('loaded');\n\n                            // Stop here, do not render default error\n                            return;\n                        } catch (fallbackErr) {\n                            console.error(`[AlpineComponentLoader] <${tagName}> Fallback Failed:`, fallbackErr);\n                            // If fallback fails, show original error (or combined)\n                            this._renderError(`Load Failed: ${err.message}. (Fallback also failed)`);\n                        }\n                    } else {\n                        // Standard Error Display\n                        this._renderError(err.message);\n                    }\n                }\n            }\n\n            // Handle data fetching for APIs\n            async _fetchData(url) {\n                if (!url)\n                    return;\n\n                // Abort previous request (Fixes Race Conditions)\n                if (this._fetchAbortController)\n                    this._fetchAbortController.abort();\n                this._fetchAbortController = new AbortController();\n                const signal = this._fetchAbortController.signal;\n\n                // Set Loading State\n                this.$props.$loading = true;\n                this.$props.$error = null;\n\n                // Setup Timeout\n                const timeoutId = setTimeout(() => this._fetchAbortController.abort('Timeout'), settings.fetchTimeout);\n\n                try {\n                    // Prepare Options\n                    let options = {\n                        method: 'GET',\n                        headers: { 'Accept': 'application/json' },\n                        ...AlpineComponentLoader.globalConfig?.fetchOptions || {},\n                        ...settings?.fetchOptions || {},\n                        signal\n                    };\n\n                    // Allows modifying headers (Auth) or options before sending\n                    if (typeof settings?.hooks?.beforeFetch === 'function') {\n                        const modifiedOptions = await settings.hooks.beforeFetch(options);\n                        if (modifiedOptions && typeof modifiedOptions === 'object')\n                            options = modifiedOptions;\n                    }\n\n                    // Merge options (global + instance) for Fetch request\n                    const res = await fetch(url, options);\n\n                    // Clear the fetch timeout\n                    clearTimeout(timeoutId);\n\n                    // Validate response\n                    if (!res.ok)\n                        throw new Error(`API Error: ${res.status} ${res.statusText}`);\n\n                    // Validate Content Type\n                    const contentType = res.headers.get(\"content-type\");\n                    if (!contentType || !contentType.includes(\"application/json\"))\n                        throw new Error(`Invalid response. Expected JSON, got \"${contentType}\"`);\n\n                    // Parse JSON\n                    let json;\n                    try {\n                        json = await res.json();\n                    } catch (e) {\n                        throw new Error(`Invalid JSON: ${e.message}`);\n                    }\n\n                    // Allows transforming data (filtering, formatting) before assignment\n                    if (typeof settings?.hooks?.afterFetch === 'function') {\n                        let modified = await settings.hooks.afterFetch(json);\n                        if (modified && typeof modified === 'object')\n                            json = modified;\n                    }\n\n                    // Only update if not aborted\n                    if (!signal.aborted)\n                        this.$props.$data = json;\n                } catch (e) {\n                    // Handle Aborts vs Real Errors\n                    if (e.name === 'AbortError' || signal.aborted) {\n                        if (signal.reason === 'Timeout') {\n                            this.$props.$error = `Request timed out after ${settings.fetchTimeout}ms`;\n                            this.$props.$data = null;\n                        }\n                        return;\n                    }\n                    console.error(`[AlpineComponentLoader] Fetch failed for ${url}`, e);\n                    this.$props.$error = e.message;\n                    this.$props.$data = null;\n                } finally {\n                    // Cleanup\n                    clearTimeout(timeoutId);\n\n                    // Only turn off loading if this request wasn't superseded by a new one\n                    if (!signal.aborted || signal.reason === 'Timeout') {\n                        this.$props.$loading = false;\n                        if (this._fetchAbortController?.signal === signal)\n                            this._fetchAbortController = null;\n                    }\n                }\n            }\n\n            // Helper to execute hooks\n            _triggerHook(hookName, detail = {}) {\n                if (settings.hooks && typeof settings.hooks[hookName] === 'function') {\n                    settings.hooks[hookName].call(this, {\n                        el: this,\n                        root: this._root,\n                        props: this.$props,\n                        ...detail\n                    });\n                }\n            }\n\n            // Load external CSS/JS dependencies\n            async _loadExternalDependencies() {\n                const promises = [];\n\n                // CSS: Always inject into global head\n                // This ensures @font-face and @keyframes are registered globally\n                settings.externalCss.forEach(url => {\n                    // Check if link exists in head\n                    if (!document.querySelector(`link[href=\"${url}\"]`)) {\n                        const link = document.createElement('link');\n                        link.rel = 'stylesheet';\n                        link.href = url;\n                        document.head.appendChild(link);\n                    }\n                });\n\n                // Scripts: Only inject if not already loaded\n                // This ensures scripts are loaded in the correct order\n                settings.externalScripts.forEach(url => {\n                    if (!scriptLoadCache.has(url)) {\n                        const p = new Promise((resolve, reject) => {\n                            if (document.querySelector(`script[src=\"${url}\"]`)) {\n                                resolve();\n                                return;\n                            }\n                            const script = document.createElement('script');\n                            script.src = url;\n                            script.async = true;\n                            script.onload = () => resolve();\n                            script.onerror = () => reject(new Error(`Failed to load script: ${url}`));\n                            document.head.appendChild(script);\n                        });\n                        scriptLoadCache.set(url, p);\n                    }\n                    promises.push(scriptLoadCache.get(url));\n                });\n\n                // Wait for all promises\n                await Promise.all(promises);\n            }\n\n            // Manual slot polyfill for Light DOM\n            _captureLightSlots() {\n                const slots = { default: [] };\n                Array.from(this.childNodes).forEach(node => {\n                    if (node.nodeType === Node.ELEMENT_NODE && node.hasAttribute('slot')) {\n                        const name = node.getAttribute('slot');\n                        if (!slots[name])\n                            slots[name] = [];\n                        slots[name].push(node);\n                    } else {\n                        slots.default.push(node);\n                    }\n                });\n                return slots;\n            }\n\n            // Render logic using DOM manipulation\n            async _renderSafe(content, lightSlots) {\n                let rootNode;\n\n                // Parse string to DOM if needed, otherwise clone fragment\n                if (typeof content === 'string')\n                    rootNode = ((new DOMParser()).parseFromString(content, 'text/html')).body;\n                else\n                    rootNode = content.cloneNode(true);\n\n                // Process styles (Constructible, Scoping, or Stripping)\n                if (!settings.stripStyles) {\n                    const styles = Array.from(rootNode.querySelectorAll('style'));\n\n                    // Feature: Constructible Stylesheets (Shadow DOM only)\n                    if (settings.shadow && settings.useConstructibleStyles && document.adoptedStyleSheets) {\n                        const combinedCss = styles.map(s => s.textContent).join('\\n');\n                        let sheet = null;\n\n                        if (combinedCss.trim().length > 0) {\n                            if (styleSheetCache.has(combinedCss)) {\n                                sheet = styleSheetCache.get(combinedCss);\n                            } else {\n                                sheet = new CSSStyleSheet();\n                                sheet.replaceSync(combinedCss);\n                                styleSheetCache.set(combinedCss, sheet);\n                            }\n                        }\n\n                        // Apply shared + internal styles\n                        this._root.adoptedStyleSheets = [\n                            ...(settings.sharedStyleSheets || []),\n                            ...(sheet ? [sheet] : [])\n                        ];\n\n                        // Remove style tags since we moved them to adoptedStyleSheets\n                        styles.forEach(el => el.remove());\n                    } else {\n                        // Fallback: Standard tag injection + Scoping\n                        styles.forEach(style => {\n                            if (!settings.shadow) {\n                                // Native @scope support\n                                if ('CSSScopeRule' in window) {\n                                    style.textContent = `@scope { ${style.textContent.replace(/:host/g, ':scope')} }`;\n                                } else {\n                                    this.setAttribute('data-scope', this._scopeId);\n\n                                    // Rewrite :host to data-scope attribute\n                                    if (style.textContent.includes(':host'))\n                                        style.textContent = style.textContent.replace(/:host/g, `${tagName}[data-scope=\"${this._scopeId}\"]`);\n                                }\n                            }\n                        });\n                    }\n                } else {\n                    rootNode.querySelectorAll('style').forEach(el => el.remove());\n                }\n\n                // Process scripts (security check and re-creation)\n                const scripts = [];\n                if (settings.executeScripts) {\n                    rootNode.querySelectorAll('script').forEach(oldScript => {\n                        const newScript = document.createElement('script');\n                        Array.from(oldScript.attributes).forEach(attr =>\n                            newScript.setAttribute(attr.name, attr.value)\n                        );\n                        newScript.textContent = oldScript.textContent;\n                        scripts.push(newScript);\n                        oldScript.remove();\n                    });\n                } else {\n                    rootNode.querySelectorAll('script').forEach(el => el.remove());\n                }\n\n                // Inject Light DOM slots if needed\n                if (!settings.shadow) {\n                    // Instead of replacing the slot entirely, we replace it with a persistent container\n                    // This allows us to append new nodes to it later via the MutationObserver\n                    rootNode.querySelectorAll('slot').forEach(slotEl => {\n                        const name = slotEl.getAttribute('name') || 'default';\n\n                        // Create a transparent wrapper acting as the slot\n                        const anchor = document.createElement('div');\n                        anchor.style.display = 'contents';\n                        anchor.setAttribute('data-acl-slot', name);\n\n                        // Insert pre-captured nodes (initial render)\n                        const nodesToInsert = lightSlots ? lightSlots[name] : null;\n                        if (nodesToInsert && nodesToInsert.length > 0) {\n                            nodesToInsert.forEach(node => anchor.appendChild(node));\n                        }\n                        // Fallback content (if no nodes provided)\n                        else if (slotEl.childNodes.length > 0) {\n                            while (slotEl.firstChild)\n                                anchor.appendChild(slotEl.firstChild);\n                        }\n\n                        // Replace the <slot> tag with our anchor\n                        slotEl.replaceWith(anchor);\n                    });\n                }\n\n                // Move nodes to component root\n                while (rootNode.firstChild) {\n                    const node = rootNode.firstChild;\n\n                    // Attach props directly to element\n                    if (node.nodeType === 1)\n                        node.$props = this.$props;\n\n                    // Append to root\n                    this._root.appendChild(node);\n                }\n\n                // Append scripts to trigger execution\n                scripts.forEach(s => this._root.appendChild(s));\n            }\n\n            // Forward specific events out of Shadow DOM\n            _setupEventForwarding() {\n                settings.forwardEvents.forEach(eventName => {\n                    this._root.addEventListener(eventName, (e) => {\n                        this.dispatchEvent(new CustomEvent(eventName, {\n                            bubbles: true,\n                            composed: true,\n                            detail: e.detail\n                        }));\n                    });\n                });\n            }\n\n            // Advanced Prop Validation and Type Casting\n            _updateProp(name, value) {\n                // Skip data-src, it's handled separately\n                if (name === 'data-src')\n                    return;\n\n                // Get config\n                const configDef = settings.attributes[name];\n\n                // Normalization: handle { type: String } vs just String\n                const type = (configDef && configDef.type) ? configDef.type : configDef,\n                    required = (configDef && configDef.required) === true,\n                    validator = (configDef && configDef.validator) ? configDef.validator : null,\n                    defaultValue = (configDef && configDef.hasOwnProperty('default')) ? configDef.default : undefined;\n\n                // Handle Missing / Null Attributes\n                if (value === null || value === undefined) {\n                    if (defaultValue !== undefined) {\n                        this.$props[name] = defaultValue;\n                        return;\n                    }\n                    if (required)\n                        console.warn(`[AlpineComponentLoader] Missing required prop \"${name}\" on <${tagName}>`);\n\n                    this._applyTypeDefault(name, type);\n                    return;\n                }\n\n                // Type Casting\n                let parsedValue;\n                if (type === Boolean) {\n                    parsedValue = (value !== null && value !== 'false');\n                } else if (type === Number) {\n                    const num = Number(value);\n                    parsedValue = isNaN(num) ? 0 : num;\n                } else if (type === Object || type === Array) {\n                    try {\n                        if (!value) parsedValue = (type === Array) ? [] : {};\n                        else parsedValue = JSON.parse(value.replace(/'/g, '\"'));\n                    } catch (e) {\n                        console.warn(`[AlpineComponentLoader] Attribute \"${name}\" is invalid JSON:`, value);\n                        parsedValue = (type === Array) ? [] : {};\n                    }\n                } else {\n                    parsedValue = value;\n                }\n\n                // Validation: Custom Validator\n                if (validator && typeof validator === 'function') {\n                    if (!validator(parsedValue)) {\n                        console.warn(`[AlpineComponentLoader] Validation failed for prop \"${name}\" on <${tagName}>. Value:`, parsedValue);\n                        // If we have a default, use it\n                        if (defaultValue !== undefined)\n                            this.$props[name] = defaultValue;\n                        // If prop is currently undefined (initial load), set a safe type default\n                        else if (this.$props[name] === undefined)\n                            this._applyTypeDefault(name, type);\n                        // If prop already had a value (update), do nothing (keep old valid value)\n                        return;\n                    }\n                }\n\n                this.$props[name] = parsedValue;\n            }\n\n            // Helper for type safety\n            _applyTypeDefault(name, type) {\n                if (type === Number)\n                    this.$props[name] = 0;\n                else if (type === Boolean)\n                    this.$props[name] = false;\n                else if (type === Array)\n                    this.$props[name] = [];\n                else if (type === Object)\n                    this.$props[name] = {};\n                else this.$props[name] = '';\n            }\n\n            // Reactively update props when attributes change\n            _syncAllAttributes() {\n                observedAttrs.forEach(name => this._updateProp(name, this.getAttribute(name)));\n            }\n\n            // Initialize persistence strategy with helpers\n            _initPersistence() {\n                const mode = this.getAttribute('persist') || settings.persist;\n                if (!mode)\n                    return;\n\n                // Choose storage (default to sessionStorage if not specified), generate key, and debounce config\n                const storage = (mode === 'local') ? localStorage : sessionStorage,\n                    key = this.getAttribute('persist-key') || settings.persistKey ||\n                        `acl:${this.localName}:${this.id ? ':' + this.id : 'no-id'}`,\n                    debounceMs = parseInt(this.getAttribute('persist-debounce') || settings.persistDebounce || '250', 10);\n\n                // Debounce timer for persistence\n                let _timer = null;\n\n                // Create a clean snapshot\n                const getSnapshot = () => Object.fromEntries(\n                    Object.entries(this.$props)\n                        .filter(([k, v]) => !k.startsWith('$') && typeof v !== 'function')\n                );\n\n                // Perform immediate save\n                const saveNow = (value) => {\n                    if (_timer)\n                        clearTimeout(_timer);\n                    _timer = null;\n                    storage.setItem(key, JSON.stringify(value || getSnapshot()));\n                };\n\n                // Attach persistence helpers\n                this.$props.$persistence = {\n                    $key: key,\n                    $save: (value) => {\n                        if (debounceMs > 0) {\n                            if (_timer)\n                                clearTimeout(_timer);\n                            _timer = setTimeout(() => saveNow(value), debounceMs);\n                        } else {\n                            saveNow(value);\n                        }\n                    },\n                    $clear: () => {\n                        if (_timer)\n                            clearTimeout(_timer);\n                        _timer = null;\n                        storage.removeItem(key);\n                    },\n                    $get: (k = null, fallback = null) => {\n                        try {\n                            let stored = JSON.parse(storage.getItem(key));\n                            return (k ? stored[k] : stored) || fallback;\n                        } catch (e) {\n                            return fallback;\n                        }\n                    },\n                    $flush: () => {\n                        if (_timer)\n                            saveNow();\n                    }\n                };\n\n                // Restore state on load\n                try {\n                    const stored = this.$props.$persistence.$get();\n                    if (stored && typeof stored === 'object')\n                        for (const k in this.$props)\n                            if (Object.prototype.hasOwnProperty.call(stored, k))\n                                this.$props[k] = stored[k];\n                } catch (e) {\n                    console.warn(`[AlpineComponentLoader] Restore failed for ${key}`, e);\n                }\n\n                // Start saving on Alpine updates\n                Alpine.effect(() => this.$props.$persistence.$save(getSnapshot()));\n\n                // Flush on page unload to prevent data loss\n                if (debounceMs > 0)\n                    window.addEventListener('beforeunload', () => this.$props.$persistence.$flush());\n            }\n\n            // Wait for Alpine.js to load\n            async _initAlpine() {\n                if (window.Alpine)\n                    return this._finishAlpineInit();\n\n                // Bind to alpine:init event + timeout if it is not fired\n                return new Promise((resolve, reject) => {\n                    document.addEventListener('alpine:init', () => {\n                        this._finishAlpineInit();\n                        resolve();\n                    }, { once: true });\n\n                    // Timeout\n                    setTimeout(() => {\n                        if (window.Alpine) {\n                            this._finishAlpineInit();\n                            resolve();\n                        }\n                        else\n                            reject(new Error(\"Alpine.js not found (Timeout)\"));\n                    }, 5000);\n                });\n            }\n\n            // Bridge props to Alpine store and init tree once Alpine is ready\n            _finishAlpineInit() {\n                // Bind Alpine store if provided\n                const storeName = this.getAttribute('bind-store') || settings.bindStore;\n                if (storeName) {\n                    let store = Alpine.store(storeName);\n                    if (store) {\n                        // Merge Alpine store with provided $props\n                        if (this.$props && typeof this.$props === 'object')\n                            Object.keys(this.$props)\n                                .filter(key => store[key] === undefined)\n                                .forEach(key => store[key] = this.$props[key]);\n\n                        // Set $props to Alpine store\n                        this.$props = store;\n                    } else {\n                        console.error(`[AlpineComponentLoader] Store \"${storeName}\" not found. Falling back to local state.`);\n                        this.$props = window.Alpine.reactive(this.$props || {});\n                    }\n                } else {\n                    // Initialize Alpine Store\n                    this.$props = window.Alpine.reactive(this.$props || {});\n                }\n\n                // Initialize persistence\n                this._initPersistence();\n\n                // Set an anonymous Alpine store for debugging\n                Alpine.store(`props_${tagName}_${Math.random().toString(36).slice(2)}`, this.$props);\n\n                // Pass the reactive reference to all children\n                // Any change to this.$props by children will now update the Store directly (and vice versa)\n                if (this._root && this._root.children)\n                    Array.from(this._root.children).forEach(node => {\n                        if (node.nodeType === 1)\n                            node.$props = this.$props;\n                    });\n\n                // We wrap in nextTick to ensure the DOM is settled before Alpine scans it\n                window.Alpine.nextTick(() => {\n                    if (this._root)\n                        window.Alpine.initTree(this._root);\n                });\n            }\n\n            // Render error message safely\n            _renderError(msg) {\n                const container = document.createElement('div');\n                container.style.cssText = toCssString(settings.errorCss);\n\n                const header = document.createElement('strong');\n                header.textContent = `Load Failed: <${tagName}>`;\n\n                const code = document.createElement('code');\n                code.textContent = msg;\n                code.style.display = 'block';\n                code.style.marginTop = '4px';\n                container.appendChild(header);\n                container.appendChild(code);\n\n                if (settings.shadow)\n                    this._root.replaceChildren(container);\n                else\n                    this._root.appendChild(container);\n            }\n\n            // Dispatch custom event\n            _dispatch(eventName) {\n                this.dispatchEvent(new CustomEvent(eventName, {\n                    bubbles: true,\n                    composed: true,\n                    detail: { props: this.$props }\n                }));\n            }\n\n            // Resolve URL string, ID selector, or Template object\n            _resolveContent(source) {\n                return (async () => {\n                    // Handle HTMLTemplateElement or ID Selector (Sync/Fast)\n                    if (source instanceof HTMLTemplateElement) {\n                        return source.content;\n                    } else if (typeof source === 'string' && source.startsWith('#')) {\n                        const el = document.querySelector(source);\n                        if (!el)\n                            return Promise.reject(new Error(`Template ID \"${source}\" not found`));\n                        if (!(el instanceof HTMLTemplateElement))\n                            return Promise.reject(new Error(`ID \"${source}\" is not a <template>`));\n                        return el.content;\n                    }\n\n                    // Check Cache API\n                    const useCache = settings.cacheTemplates && 'caches' in window,\n                        faH = 'acl__fetched-at__'; // XXX: Make this configurable?\n\n                    // Cache API\n                    let _cache;\n                    if (useCache) {\n                        try {\n                            // Open cache\n                            _cache = await caches.open(settings._templateCacheKey);\n\n                            // Read from cache + check expiration\n                            const match = await _cache.match(source);\n                            if (match?.ok) {\n                                const fetchedAt = Number(match.headers.get(faH));\n                                if (!Number.isNaN(fetchedAt) && (Date.now() - fetchedAt) < settings._templateCacheExpire)\n                                    return match.text();\n                                await _cache.delete(settings._templateCacheKey);\n                            }\n                        } catch { /* Ignore cache read errors */ }\n                    }\n\n                    // Network Fetch\n                    const res = await fetch(source, { cache: 'no-store' });\n                    if (!res.ok)\n                        throw new Error(`HTTP ${res.status}`);\n\n                    // Write to Cache API\n                    if (useCache) {\n                        try {\n                            // Clone response + headers\n                            const clone = res.clone(),\n                                headers = new Headers(clone.headers);\n\n                            // Set cache expiration header\n                            headers.set(faH, Date.now().toString());\n\n                            // Write to cache\n                            await _cache.put(\n                                source,\n                                new Response(clone.body, {\n                                    status: clone.status,\n                                    statusText: clone.statusText,\n                                    headers\n                                })\n                            );\n                        } catch { /* Ignore cache write errors */ }\n                    }\n\n                    // Return HTML string\n                    return res.text();\n                })();\n            }\n\n            // Helpers to deal with template caches within the component\n            // TODO: Implement as a an available Alpine directive/$props function\n            async _pruneCache() { return await AlpineComponentLoader.pruneCache(settings._templateCachePrefix, settings._templateCacheKey); }\n            async _clearCache() { return await AlpineComponentLoader.clearCache(settings._templateCacheKey); }\n        }\n\n        // Register custom element\n        customElements.define(tagName, AlpineExternalComponent);\n    }\n}\n\n// Declarative component proxy, replaces itself with the loaded component\nclass AlpineDeclarativeLoader extends HTMLElement {\n    async connectedCallback() {\n        const src = this.getAttribute('src') || this.getAttribute('url');\n        if (!src) {\n            console.error(`<${this.localName}>: missing \"src\" attribute`);\n            return;\n        }\n\n        // Determine Tag Name (Attribute > Filename)\n        let tagName = this.getAttribute('tag');\n        if (!tagName)\n            tagName = (src.split('/').pop()).split('.').shift(); // Strip extension\n\n        // Validate tag name; ensure it contains a hyphen\n        if (!tagName.includes('-')) {\n            console.error(`<${this.localName}>: Tag name \"${tagName}\" must contain a hyphen.`);\n            return;\n        }\n\n        // Parse Config from Attributes\n        const config = {\n            shadow: this.hasAttribute('shadow') ? (this.getAttribute('shadow') !== 'false') : AlpineComponentLoader.globalConfig.shadow,\n            loading: this.getAttribute('loading') || 'eager',\n            dataSrc: this.getAttribute('data-src') || null,\n            bindStore: this.getAttribute('bind-store') || null,\n            fallback: this.getAttribute('fallback') || null,\n            attributes: {} // Auto-inference of props\n        };\n\n        // Define the component (if not already defined)\n        if (!customElements.get(tagName)) {\n            // Heuristic: Check other attributes to guess Prop Types\n            for (const attr of this.attributes) {\n                if ([\n                    'src', 'url', 'tag', 'shadow', 'loading', 'class',\n                    'style', 'id', 'data-src', 'bind-store', 'fallback'\n                ].includes(attr.name))\n                    continue;\n\n                // If value looks like JSON Array/Object, treat as such\n                const val = attr.value.trim();\n\n                // Try to infer type\n                let inferredType = String;\n                if (val.startsWith('[') || val.startsWith('{')) inferredType = (val.startsWith('[')) ? Array : Object;\n                else if (val === 'true' || val === 'false' || val === '') inferredType = Boolean;\n                else if (!isNaN(Number(val))) inferredType = Number;\n\n                // Add to config\n                config.attributes[attr.name] = inferredType;\n            }\n\n            // Define the component\n            AlpineComponentLoader.define(tagName, src, config);\n        }\n\n        // Create the REAL element\n        const realElement = document.createElement(tagName);\n\n        // Forward Attributes (Props, Classes, IDs)\n        for (const attr of this.attributes) {\n            if (['src', 'url', 'tag', 'shadow'].includes(attr.name))\n                continue; // Don't forward loader-specific config\n            realElement.setAttribute(attr.name, attr.value);\n        }\n\n        // Move any children (slots) to the REAL element\n        while (this.firstChild)\n            realElement.appendChild(this.firstChild);\n\n        // Swap in the DOM\n        this.replaceWith(realElement);\n    }\n}\n\n// Dynamic component switcher\nclass AlpineDynamicLoader extends HTMLElement {\n    static get observedAttributes() {\n        return ['is'];\n    }\n\n    constructor() {\n        super();\n        this._cache = new Map();\n    }\n\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (name === 'is' && newVal && newVal !== oldVal)\n            this._switch(newVal);\n    }\n\n    connectedCallback() {\n        this.setAttribute('data-acl-component', 'acl-dynamic');\n        if (!this.firstElementChild && this.getAttribute('is'))\n            this._switch(this.getAttribute('is'));\n    }\n\n    disconnectedCallback() {\n        // Cleanup cache to prevent memory leaks when loader is removed\n        this._cache.forEach(el => {\n            if (el._root && window.Alpine)\n                window.Alpine.destroyTree(el._root);\n        });\n        this._cache.clear();\n    }\n\n    _switch(tag) {\n        if (!tag)\n            return;\n        tag = tag.toLowerCase();\n\n        const keepAlive = this.hasAttribute('keep-alive'),\n            current = this.firstElementChild;\n\n        // Cache the current component if keep-alive is active\n        if (current && keepAlive) {\n            // Save scroll position before detaching\n            current._savedScroll = current.scrollTop;\n\n            // Mark as kept alive so disconnectedCallback doesn't destroy it\n            current._isKeptAlive = true;\n            this._cache.set(current.tagName.toLowerCase(), current);\n\n            // Detach\n            current.remove();\n\n            // Reset flag for future legitimate removals\n            current._isKeptAlive = false;\n        } else {\n            // Standard tear down\n            this.replaceChildren();\n            // If we turned off keep-alive, ensure we don't hold onto old refs\n            if (current && !keepAlive)\n                this._cache.delete(current.tagName.toLowerCase());\n        }\n\n        // Restore or Create new component\n        if (keepAlive && this._cache.has(tag)) {\n            const el = this._cache.get(tag);\n            this.appendChild(el);\n\n            // Restore scroll position\n            if (el._savedScroll)\n                el.scrollTop = el._savedScroll;\n        } else {\n            try {\n                const el = document.createElement(tag);\n                // Forward attributes (excluding loader-specific ones)\n                Array.from(this.attributes).forEach(attr => {\n                    if (!['is', 'keep-alive'].includes(attr.name))\n                        el.setAttribute(attr.name, attr.value);\n                });\n                this.appendChild(el);\n            } catch (e) {\n                console.error(`[AlpineComponentLoader] Failed to create: <${tag}>`, e);\n            }\n        }\n    }\n}\n\n// Once DOM is ready, start loading components\ntry {\n    if (document.readyState === 'loading') {\n        window.addEventListener('DOMContentLoaded', AlpineComponentLoader.start, { once: true });\n    } else {\n        AlpineComponentLoader.start();\n    }\n} catch (e) {\n    console.warn(`[AlpineComponentLoader] Failed to register components:`, e);\n}"]}